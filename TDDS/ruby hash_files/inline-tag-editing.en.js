'use strict';StackExchange.inlineTagEditing=function(){var a,b,c,e,f,i=$("<div></div>"),j=function(){c.mouseover(function(){b.show()}).mouseout(function(){b.hide()})},g=function(){b.unbind("click").one("click",function(){c.fadeOut("fast",function(){c.appendTo(i);StackExchange.helpers.addSpinner(a);$.ajax({type:"GET",url:"/posts/"+e+"/edit-tags",data:{reviewTaskId:f},dataType:"html",success:k,error:l})})})},h=function(d){StackExchange.helpers.disableSubmitButton(a);StackExchange.helpers.removeMessages();
var b=function(){a.empty();c.appendTo(a);c.show().find("a#edit-tags").parent().hide();a.fadeIn("fast");g()};d?b():a.fadeOut("fast",b)},k=function(d){StackExchange.helpers.removeSpinner();d=$(d);"function"==typeof $().autocomplete&&(d=d.not('script[src*="tageditor.js"]'));var b=$('<form method="post" action="/posts/'+e+'/edit-tags"></form>');a.css("display","none").append(b);b.append(d);a.find("div.form-item").append('<div class="form-submit"><input type="hidden" name="fkey" value="'+StackExchange.options.user.fkey+
'" /><input type="hidden" name="reviewTaskId" value="'+f+'" />'+$("<input>",{id:"edit-tags-submit",type:"submit",value:"Save Tag Edits",tabindex:"104"}).prop("outerHTML")+'<a id="edit-tags-cancel" class="cancel-edit" style="margin-left:8px;" href="#" tabindex="105">cancel</a></div>');StackExchange.using("postValidation",function(){StackExchange.postValidation.initOnBlurAndSubmit(b,1,"tags",!1,function(a){c.find("a.post-tag").remove();c.prepend(a.html);h();$(document).trigger("retag",e)})});b.find(".cancel-edit").click(function(a){h();
a.preventDefault()});a.fadeIn("fast",function(){$("#tagnames").focus()})},l=function(a){StackExchange.helpers.removeSpinner();h();StackExchange.helpers.showErrorMessage(c,a.responseText&&300>a.responseText.length?a.responseText:"An error occurred when fetching the tag editor")};return{init:function(){StackExchange.disableInlineTagEdits||(e=$('div.question div.vote > input[type="hidden"]').val(),a=$("div.question div.post-taglist"),a.find("a.post-tag").wrapAll('<span class="edit-tags-wrapper"></span>'),
c=a.find("span.edit-tags-wrapper"),b=$('<span class="dno">'+$("<a>",{id:"edit-tags",style:"",title:"edit only this question's tags",text:"edit tags"}).prop("outerHTML")+"</span>"),c.append(b),j(),g())},initReviewRetag:function(d){StackExchange.disableInlineTagEdits||(e=$('div.question div.vote > input[type="hidden"]').val(),f=d,a=$("div.question div.post-taglist"),a.find("a.post-tag").wrapAll('<span class="edit-tags-wrapper"></span>'),c=a.find("span.edit-tags-wrapper"),b=$(".retag-question:first"),
b.removeAttr("href"),g())}}}();