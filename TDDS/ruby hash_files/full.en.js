'use strict';(function(j){function f(){}function i(d,g){if(l)return g.indexOf(d);for(var c=g.length;c--;)if(g[c]===d)return c;return-1}var d=f.prototype,g=[],l=g.indexOf?!0:!1;d.getListeners=function(d){var g=this._events||(this._events={});return g[d]||(g[d]=[])};d.addListener=function(d,g){var c=this.getListeners(d);-1===i(g,c)&&c.push(g);return this};d.removeListener=function(g,d){var c=this.getListeners(g),h=i(d,c);-1!==h&&(c.splice(h,1),0===c.length&&(this._events[g]=null));return this};d.addListeners=
function(g,d){return this.manipulateListeners(!1,g,d)};d.removeListeners=function(g,d){return this.manipulateListeners(!0,g,d)};d.manipulateListeners=function(g,d,c){var h,e,b=g?this.removeListener:this.addListener,g=g?this.removeListeners:this.addListeners;if("object"===typeof d)for(h in d){if(d.hasOwnProperty(h)&&(e=d[h]))"function"===typeof e?b.call(this,h,e):g.call(this,h,e)}else for(h=c.length;h--;)b.call(this,d,c[h]);return this};d.removeEvent=function(g){g?this._events[g]=null:this._events=
null;return this};d.emitEvent=function(d,l){for(var c=this.getListeners(d),h=c.length;h--;)!0===c[h].apply(null,l||g)&&this.removeListener(d,c[h]);return this};"function"===typeof define&&define.amd?define(function(){return f}):j.EventEmitter=f})(this);
StackExchange.realtime=function(){function j(){if(!(null==o||1!=o.readyState))for(var a=0,b=u.length;a<b;a++)f("sending "+u[a]),o.send(u[a])}function f(a){StackExchange.options.enableLogging&&console.log("realtime: "+a)}function i(){w.addListener("hb",function(a){o.send(a)})}function d(a){u.push(a);j()}function g(a,b){1!=$("#vote-accepted-"+a.answerid).length&&($(".vote-accepted-on").remove(),b||$('.vote input[value="'+a.answerid+'"]').parent().append($("<span>",{"class":"vote-accepted-on",title:"The question owner accepted this as the best answer",
text:"accepted"})))}function l(a){if(0==$("#comment-"+a.commentid).length){var b=$("#comments-link-"+a.id),a=$("tbody","#comments-"+a.id),k=a.data("remaining-comments-count")||0,c=!(b.data("anon")||b.data("reg"));k++;b.data("comments-count",k);b.attr("title","expand to show all comments on this post, or add one of your own");var h=function(a){return 1==a.commentsCount?"add / show <b>"+a.commentsCount+"</b> more comment":"add / show <b>"+a.commentsCount+"</b> more comments"}({commentsCount:k}),e=function(a){return 1==
a.commentsCount?"show <b>"+a.commentsCount+"</b> more comment":"show <b>"+a.commentsCount+"</b> more comments"}({commentsCount:k});b.removeClass("disabled-link");a.data("remaining-comments-count",k);c?b.html(h):b.html(e);b.show().fadeTo("fast",0.7).fadeTo("fast",1)}}function n(){$.ajax({type:"POST",url:"/review/suggested-edit-count",data:{fkey:StackExchange.options.user.fkey},dataType:"json",success:function(a){if(a&&a.count){var a=a.count,b=$(".suggested-edits-count");b.text()!=a&&(0==$(":animated").length&&
b.fadeTo("fast",0.5).fadeTo("fast",1),b.text(a))}}})}function m(){$("#new-answer-activity").remove();$("#answers-header").prepend(z)}function c(a){var b=$(".question[data-questionid="+a.id+"], .answer[data-answerid="+a.id+"]"),k=$('<div class="new-post-activity" data-postid="'+a.id+'">an edit has been made to this post; click to load</div>');0<b.find(".new-post-activity[data-postid="+a.id+"]").length||b.prepend(k.click(function(){$(".new-post-activity[data-postid="+a.id+"]").remove();0==$("#review-content").length&&
$.get("/posts/ajax-load-realtime/{postIdsSemiColonDelimited}?title=true".formatUnicorn({postIdsSemiColonDelimited:a.id}),s(b.find(".postcell, .answercell"),a));$(document).trigger("refreshEdit",a.id)}))}function h(a,k,c){null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.isIgnored(a.body)||(a.fetch&&$.ajax({url:"/posts/"+a.id+"/"+c}).done(function(b){a.body=b;r[a.id]={id:a.id,body:a.body,index:(new Date).getTime(),siteid:a.siteid}}),r[a.id]={id:a.id,body:a.body,index:(new Date).getTime(),
siteid:a.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(p),0<$(".tag-sponsorship").length&&$("#question-mini-list, #questions").css("margin-top","0px"),k&&b())}function e(a,b){return a.index<b.index?-1:a.index>b.index?1:0}function b(){var b=[],c;for(c in r)r.hasOwnProperty(c)&&b.push(r[c]);b=b.sort(e);for(c=0;c<b.length;c++){var h=b[c];$("#question-summary-"+h.id).remove();$(h.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}a(0);null!=StackExchange.options.user.accountId&&
StackExchange.tagPreferences.applyPrefs(!0,q);styleCode();k();$(".new-post-activity").remove();r={}}function a(a){var b=document.title.replace(/^\(\d*\*?\) /,"");0<a&&(b="("+a+") "+b);window.setTimeout(function(){$(document).attr("title",b)},200)}function k(){for(var a=$("span.relativetime, span.relativetime-clean"),b=0;b<a.length;b++)if(a[b].title){var k;k=a[b].title;if(null==k||20!=k.length)k=void 0;else{k=k.substr(0,10)+"T"+k.substr(11,10);k=new Date(k);k=((new Date).getTime()-k.getTime())/1E3+
StackExchange.options.serverTimeOffsetSec;var c=Math.floor(k/86400),h=void 0;if(isNaN(c)||0>c||31<=c)h=void 0;else if(h=void 0,h=0==c){c=void 0;if(!(c=2>k&&"just now"))if(c=void 0,!(c=60>k&&(B?Math.floor(k)+"s ago":Math.floor(k)+" secs ago")))if(c=void 0,!(c=120>k&&(B?"1m ago":"1 min ago")))if(c=void 0,!(c=3600>k&&(B?Math.floor(k/60)+"m ago":Math.floor(k/60)+" mins ago")))if(c=void 0,!(c=7200>k&&(B?"1h ago":"1 hour ago")))if(c=void 0,c=86400>k)c=void 0,B?c=Math.floor(k/3600)+"h ago":(k={hours:Math.floor(k/
3600)},c=1==k.hours?k.hours+" hour ago":k.hours+" hours ago");h=c}k=h}k&&(a[b].innerHTML=k)}}var o,r={},t=[],v=0,u=[],y=10,A=!1,B=!1,q,w=new EventEmitter,z=function(){var a=Object.keys(t).length;0==a&&$("#new-answer-activity").remove();return $('<div id="new-answer-activity">'+function(a){return 1==a.count?a.count+" new answer to this question":a.count+" new answers to this question"}({count:a})+"</div>").click(function(){StackExchange.realtime.expandAnswers()})},s=function(a,b){return function(k){var c=
$(k).filter(".question, .answer"),h=c.find(".postcell, .answercell"),e=a.closest(".question"),g=0<e.length,d=$("h1 a.question-hyperlink"),l=c.data("title"),i=g&&$.trim(d.text())!=l,f=$(".question-status"),o=function(a,b){return function(){return $.Deferred(function(k){null==b||b()?a.animate({opacity:0},150).promise().done(function(){k.resolve()}):k.resolve()})}},c=o(d,function(){return i}),m=o(a),o=o(f);$.when(c(),m(),o()).done(function(){i&&d.text(l).animate({opacity:1},150);var b=function(a,b){return new $.Deferred(function(k){b.css({opacity:0});
a.replaceWith(b);b.animate({opacity:1},150,function(){k.resolve()})})};b(a,h).done(function(){styleCode();StackExchange.question.bindSuggestedEditPopupLinks();g&&StackExchange.inlineTagEditing&&StackExchange.inlineTagEditing.init()});var c=$(k).filter(".question-status");c.length?(f.length||(f=$("<div>").addClass("question-status").insertAfter(e)),b(f,c)):f.remove()});window.history.pushState(b,"new post","#"+b.id)}},p=function(){var b=Object.keys(r).length;a(b);return $('<div class="new-post-activity">'+
function(a){return 1==a.count?a.count+" question with new activity":a.count+" questions with new activity"}({count:b})+"</div>").click(function(){StackExchange.realtime.expandActiveQuestions()})};return{init:function(a){var b=a.split(","),b=b[v%b.length];null!=b&&0!=b.indexOf("ws://")&&0!=b.indexOf("wss://")&&(b=("https:"===document.location.protocol?"wss://":"ws://")+b);if("WebSocket"in window||"MozWebSocket"in window){if(o)try{f("closing WebSocket"),o.close()}catch(c){}o||(f("opening WebSocket to: "+
b),o="WebSocket"in window?new WebSocket(b):new MozWebSocket(b),o.onopen=function(){A||(A=!0);v=0;f("WebSocket opened");j();i();setInterval(k,6E4)},o.onmessage=function(a){a=$.parseJSON(a.data);w.emitEvent(a.action,[a.data])},o.onclose=function(){o=null;f("WebSocket closed");5>v&&0<y&&(v++,y--,f("reconnect attempt:"+v+" max retries:"+y),setTimeout(function(){StackExchange.realtime.init(a)},1E3*((new Date).getTime()%50/20)))},o.onerror=function(){f("WebSocket failed");o=null})}},expandActiveQuestions:b,
expandAnswers:function(){$("#tabs").show();$("#new-answer-activity").remove();var a=$("#answers #answers-header"),b=a.find(".answers-subheader h2"),c=parseInt(b.text())+t.length;isNaN(c)&&(c=t.length);b.text(function(a){return 1==a.answerCount?a.answerCount+" Answer":a.answerCount+" Answers"}({answerCount:c}));$.ajax({url:"/posts/ajax-load-realtime/{postIdsSemiColonDelimited}".formatUnicorn({postIdsSemiColonDelimited:t.join(";")})}).done(function(b){var k=$('<div class="dno" />').append(b);k.insertAfter(a).fadeIn(400,
function(){k.removeClass("dno");styleCode();StackExchange.vote.init($(".question").data("questionid"));k.find(".answer").each(function(){StackExchange.comments.init({post:$(this)})})})});StackExchange.question.bindSuggestedEditPopupLinks();k();t=[]},subscribeToActiveQuestions:function(a,b,k,c,e,g,l){a=a+"-"+b;q=k;B=g;d(a);w.addListener(a,function(a){a=$.parseJSON(a);if(null!=e)for(var k=0;k<e.length;k++)if(-1==$.inArray(e[k],a.tags))return;h(a,c,b);null!=l&&l(a)})},subscribeToInboxNotifications:function(){if(null!=
StackExchange.options.user.accountId){var a=StackExchange.options.user.accountId+"-inbox";d(a);w.addListener(a,function(a){$(".unreadCount").remove();var b=$("<a>",{"class":"unreadCount",title:"unread messages in your inbox",text:a}).insertAfter(".genu");$("#portalLink .unreadCount").css({marginTop:b.css("margin-top"),opacity:1},2E3);genuwine.setUnreadCount(a)})}},subscribeToQuestion:function(a,b){var k=a+"-question-"+b;d(k);w.addListener(k,function(a){a=$.parseJSON(a);if(a.acctid!=StackExchange.options.user.accountId)switch(a.a){case "score":var b=
$('.vote input[value="'+a.id+'"]').siblings(".vote-count-post");b.text()!=a.score&&(b.text(a.score),0==$(":animated").length&&b.fadeTo("fast",0.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts());break;case "comment-add":l(a);break;case "answer-add":0==$("#answer-"+a.answerid).length&&(t.push(a.answerid),StackExchange.cardiologist&&(StackExchange.cardiologist.isHeartBeating()?StackExchange.helpers.DelayedReaction(m,5E3).trigger():m(),StackExchange.cardiologist.notifiedOfNewAnswer()));
break;case "accept":g(a);break;case "unaccept":g(a,!0);break;case "post-edit":c(a)}})},unsubscribeToQuestion:function(a,b){var k=a+"-question-"+b;f("unsubscribing "+k);var c=$.inArray(k,u);-1!=c&&(u.splice(c,1),null==o||1!=o.readyState||o.send("-"+k))},subscribeToReputationNotifications:function(a){null!=StackExchange.options.user.accountId&&(a=a+"-"+StackExchange.options.user.userId+"-reputation",d(a),w.addListener(a,function(a){var b=$("#hlinks .reputation-score, .links-container .reputation");
b.text()!=a.score&&(0==$(":animated").length&&b.fadeTo("fast",0.8).fadeTo("fast",1),b.text(a).attr("title","your reputation: "+a))}))},subscribeToSuggestedEdits:function(a){a+="-suggested-edits-count-update";d(a);w.addListener(a,function(){n()})},updateRelativeDates:k,subscribeToReviewDashboard:function(a){a+="-review-dashboard-update";d(a);w.addListener(a,function(a){var a=$.parseJSON(a),b=$('.dashboard-activity[data-review-task="'+a.i+'"]');0==b.find('.dashboard-user[data-user="'+a.u+'"]').length&&
(b.find(".dashboard-user:nth-child(6)").remove(),b.css("overflow","hidden"),b.children().css({left:"-44px"}),b.prepend(a.html).children().animate({left:0},function(){b.css("overflow","visible")}))})},subscribeToTopBarNotifications:function(){if(null!=StackExchange.options.user.accountId){var a=StackExchange.options.user.accountId+"-topbar";d(a);w.addListener(a,function(a){StackExchange.topbar.handleRealtimeMessage(a)})}}}}();"use strict";StackExchange.anonymous={};
var gauth=function(){return{informStackAuth:function(j){if(gauth.enabled()){var f=document.domain;"meta."==f.substr(0,5)&&(f=f.substr(4,f.length-4));var i=$.cookie("gauth");if(null==i)$.cookie("gauth",null,{path:"/",domain:f}),$.cookie("gauth",null,{path:"/",domain:document.domain});else{"."!=f.charAt(0)&&(f="."+f);$.cookie("gauth",null,{path:"/",domain:f});$.cookie("gauth",null,{path:"/",domain:document.domain});var d=i.indexOf(":"),f=i.substr(0,d),i=i.substr(d+1),g=j+"/auth/global/write?authToken="+
encodeURIComponent(f)+"&nonce="+encodeURIComponent(i);$(document).ready(function(){$("#footer").append("<iframe style='display:none' src='"+g+"'></iframe>")})}}},checkStackAuth:function(j){if(gauth.enabled()&&null==$.cookie("gauthed")){$.cookie("gauthed","1",{path:"/"});var f=function(i){if(i.origin==j)if("No Local Storage"==i.data)gauth.noGAuthStorage();else if("No Session"==i.data)gauth.noGAuthSession();else{var d=i.data.substr(0,i.data.indexOf(",")),i=i.data.substr(i.data.indexOf(",")+1);$.post("/users/login/global",
{authToken:d,nonce:i},function(g){gauth.globallyAuthed(g)},"json")}};window.attachEvent?window.attachEvent("onmessage",f):window.addEventListener("message",f,!1);$.post("/users/login/global/request","",function(i){var d=j+"/auth/global/read?request="+encodeURIComponent(i.token)+"&nonce="+encodeURIComponent(i.nonce);$(document).ready(function(){$("#footer").append("<iframe id='global-auth-frame' style='display:none' src='"+d+"'></iframe>")})},"json")}},enabled:function(){$.cookie("enabledCheck","1");
if(null==$.cookie("enabledCheck"))return!1;$.cookie("enabledCheck",null);return"undefined"==typeof localStorage?!1:!0},noGAuthStorage:function(){},noGAuthSession:function(){},globallyAuthed:function(j){if(j&&j.Message){var f=j.Message;j.MessageType&&"WelcomeBack"===j.MessageType&&(f="Welcome back "+j.UserLink+", you've been logged in.");var j=f+" ",i,d=!1,f=""+window.location,g=f.indexOf("returnurl=");if(-1!=g){var l=f.indexOf("&",g);-1==l&&(l=f.length);i=decodeURIComponent(f.substring(g+10,l));i=
/^(?:http:\/\/|\/)/.test(i)?i.replace(/[^-a-z0-9+&@#\/%?=~_|!:,.;()]/g,""):null}-1!=f.indexOf("/users/login")&&(d=!0,i=i||"/");StackExchange.helpers.showFancyOverlay({message:d?j+"<br>You are being redirected...":j+(i?'<a href="'+("javascript:window.location='"+i+"'")+'">Click here</a> to return to your last location.':'<a href="javascript:location.reload(true)">Click here</a> to refresh the page.'),showClose:!d,complete:function(){d&&(window.location=i)}})}}}}(),genuwine=function(){var j,f="",i,
d,g=[],l=function(){return $(".genu").hasClass("genu-on")},n=function(){var b=$(".genu"),k=$("#seWrapper");if(0==k.length||0<i||d){c();var k=$("#seWrapper"),e;0<i?(e=$("#seTabInbox"),r(e)):d?(e=$("#seTabNotices"),h(e)):(e=$("#seTabHot"),a(e));e.addClass("seCurrent")}if(e=b.hasClass("genu-on")){$(".unreadCountTab").remove();$("#portalLink .itemBoxNew").removeClass("itemBoxNew");k.fadeOut("fast");for(k=0;k<g.length;k++)g[k]();g=[];0<d&&$("#portalLink .unreadCount").text(""+d).addClass("newNotices").show().click(n)}else k.fadeIn("fast"),
$("#portalLink .unreadCount").hide();b.toggleClass("genu-on",!e);-1==i&&$(b).ready(function(){$("#seTabInbox").hide()});m($("#seTabInbox"),$("#seTabNotices"))},m=function(a,b){StackExchange.options.site.isNoticesTabEnabled&&d&&0==b.find(".unreadCountTab").length&&b.prepend('<span class="unreadCountTab newNotices">'+d+"</span>");0<i&&0==a.find(".unreadCountTab").length&&a.prepend('<span class="unreadCountTab">'+i+"</span>")},c=function(){$("#seWrapper").remove();var k='<div id="seWrapper" class="seWrapper" style="position:absolute; display:none;"><div class="seIntro"><a href="'+
f+'">Stack Exchange</a> is a network of free, community-driven Q&A sites.</div><div class="seNav"><ul class="seNavLinks"><li><a id="seTabHot">Hot Questions</a></li><li><a id="seTabSites">All Sites</a></li>'+(!StackExchange.options.user.isAnonymous?'<li><a id="seTabInbox">Inbox</a></li>':"")+(!StackExchange.options.user.isAnonymous&&StackExchange.options.site.isNoticesTabEnabled?'<li><a id="seTabNotices">Notifications</a></li>':"")+'</ul></div><div class="seContainer"></div><div class="seFooter"><a id="seClose">close</a></div></div>',
c=$("#hlinks"),c=c.height()+c.offset().top+5;$(k).appendTo("#portalLink").css({top:c}).find("ul.seNavLinks a").click(function(){var k=$(this);$(".seNavLinks a").removeClass("seCurrent");k.addClass("seCurrent");switch(k.attr("id")){case "seTabHot":a(k);$("#seContainerSites, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerHot").fadeIn("fast");break;case "seTabSites":0==$("#seContainerSites").length&&b(k);$("#seContainerHot, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();
$("#seContainerSites").fadeIn("fast");break;case "seTabInbox":r(k);$("#seContainerHot, #seContainerSites, #seContainerEmail, #seContainerNotices").hide();$("#seContainerInbox").fadeIn("fast");break;case "seTabNotices":h(k),$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerEmail").hide(),$("#seContainerNotices").fadeIn("fast")}});$("#seClose").click(function(){n()})},h=function(a){0==$("#seContainerNotices").length&&y(a,"/notices/genuwine","json",e,!0)},e=function(a,b){for(var k=
'<div id="seContainerNotices" style="display:none">',c=0;c<b.length;c++){var e=b[c],h=e.text,l=e.is_unread,i=e.site_url,f=e.icon,o=e.hasOwnProperty("type")?' data-type="'+e.type.toString()+'"':"";null!=e.switch_type&&(o=o+' data-sw-type="'+e.switch_type.toString()+'" data-sw-site="'+e.site_id.toString()+'"');k+='<div class="noticeBox'+(l?" itemBoxNew":"")+'"'+o+'><a href="'+i+'" class="siteLinkFavicon"><img src="'+f+'"></a><div class="siteInfo"><p>'+h+"</p></div></div>"}A(a,k+"</div>","notifications_popup.click");
g.push(function(){d=0;m($("#seTabInbox"),$("#seTabNotices"))});d=0},b=function(a){y(a,f+"/genuwine/sites?callback=?&host="+document.location.host+(j?"&accountId="+j:""),"jsonp",o)},a=function(a){0==$("#seContainerHot").length&&y(a,f+"/genuwine?callback=?","jsonp",k)},k=function(a,b){for(var k=$("<div/>"),c='<div id="seContainerHot" style="display:none">',e=0;e<b.length;e++)var h=b[e],g=h.SiteId,d='href="http://'+g+"/q/"+h.Id+'?hq=1"',l=parseInt(h.DisplayScore,10),c=c+('<div class="itemBox" data-sw-type="2" data-sw-name="'+
g+'"><a '+d+' class="seNumAnswer">'+l+'</a><div class="siteInfo"><p><a '+d+">"+k.text(h.Title).html()+'</a></p><a href="http://'+g+'" class="siteLink">'+g+"</a></div></div>");A(a,c+"</div>")},b=function(a){y(a,f+"/genuwine/sites?callback=?&host="+document.location.host+(j?"&accountId="+j:""),"jsonp",o)},o=function(a,b){for(var k='<div id="seContainerSites" style="display:none">',c=0;c<b.length;c++)var e=b[c],h=e.Name,g='href="http://'+e.Id+'?as=1"',k=k+('<div class="itemBox" data-sw-type="3" data-sw-name="'+
e.Id+'"><a '+g+' class="siteFavicon"><img src="'+e.FaviconUrl+'" alt="'+h+'"></a><div class="siteInfo"><p><a '+g+">"+h+"</a></p><a "+g+' class="siteLink">'+e.Description+"</a></div></div>");A(a,k+"</div>")},r=function(a){-1!=i&&(0==$("#seContainerInbox").length||0<i)&&t(a)},t=function(a){y(a,"/inbox/genuwine","json",v,!0)},v=function(a,b){for(var k='<div id="seContainerInbox" style="display:none">',c=0;c<b.length;c++){var e=b[c],h='href="'+e.Url+'"',d='title="'+e.CreationDate+'"',l=e.Count,f=e.IsNew?
" itemBoxNew":"",o=e.hasOwnProperty("ItemType")?' data-type="'+e.ItemType.toString()+'"':"";null!=e.SiteId&&(o=o+' data-sw-type="7" data-sw-site="'+e.SiteId.toString()+'"');k+='<div class="itemBox'+f+'"'+o+"><a "+h+' class="siteLinkFavicon"><img src="'+e.FaviconUrl+'" alt="'+e.SiteUrl+'"></a><div class="siteInfo">';"careers message"==e.Type?k+="<p><a "+h+' style="font-weight:normal"><b>'+e.Title+"</b> wants to contact you on <b>Stack Overflow Careers</b></a></p>":"invitation"==e.Type?(d=e.Count,k+=
"<p><a "+h+' style="font-weight:normal"><b>'+d+"</b> "+("invitation"+(1<d?"s":""))+" awarded on <b>Stack Overflow Careers</b></a></p>"):k+="<p>"+(1<l?l+" ":"")+e.Type+" on <a "+h+" "+d+">"+e.Title+"</a></p>";k+='<p class="inboxSummary">'+(e.Summary||"")+"</p></div></div>"}j&&5<=b.length&&(k+='<div class="itemMoreContainer"><div class="seIntro"><a href="http://stackexchange.com/users/'+j+'?tab=inbox">more inbox messages &hellip;</a></div></div>');A(a,k+"</div>","inbox_popup.click");g.push(function(){i=
0;m($("#seTabInbox"),$("#seTabNotices"))});i=0},u={},y=function(a,b,k,c,e){var h=a.attr("id");if(u[h])B();else{u[h]=!0;B();var g=function(){u[h]=!1;StackExchange.helpers.showErrorMessage($("#seWrapper .seContainer"),"An error occurred while loading - please try again.")};$.ajax({type:"GET",url:b,dataType:k,success:function(b){u[h]=!1;b&&(0<b.length||e)?c(a,b):g()},error:g,complete:function(){$("#seWrapper .seContainer").removeSpinner()}})}},A=function(a,b,k){b=$(b);b.prependTo("#seWrapper .seContainer");
b.find(".itemBox a, .noticeBox a").click(function(){var a=$(this).closest(".itemBox, .noticeBox");k&&k.length&&StackExchange.gps.track(k,{item_type:a.data("type")});var b=a.data("sw-type"),c=a.data("sw-site"),a=a.data("sw-name");if(null!=b&&(null!=c||null!=a))StackExchange.gps.track("site.switch",c?{item_type:b,target_site:c}:{item_type:b,target_name:a})});a.hasClass("seCurrent")&&b.fadeIn("fast")},B=function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.addSpinner("#seWrapper .seContainer",
{position:"relative",left:"10px",top:"10px"})},q=function(){var a=$("#portalLink .unreadCount"),b=a.css("margin-top");a.css({marginTop:-20,opacity:0}).show().animate({marginTop:b,opacity:1},2E3)},w=function(){var a=$("#portalLink .unreadCount"),b=a.data("events");(!b||!b.click)&&0<a.length&&a.click(n)};return{isVisible:l,click:n,setUnreadCount:function(a){i=a;var b=$("#seTabInbox");0<a?($("#portalLink .unreadCount").text(i),b.hasClass("seCurrent")&&l()&&t(b),q()):$("#portalLink .unreadCount").text("").hide();
$("#portalLink .unreadCount").removeClass("newNotices");w()},animateInbox:q,init:function(a,b,k){var c=$(".genu");1<=c.length&&(c[0].onclick=null);j=a;f=c.attr("href");i=b;d=k;!(0<i)&&StackExchange.options.site.isNoticesTabEnabled&&(99<d&&(d=99),0<d&&$("#portalLink .unreadCount").text(""+d).addClass("newNotices"),w());c.removeAttr("href").click(n);w();$(document).click(function(a){l()&&!$.contains($("#portalLink")[0],a.target)&&n()})}}}();
!function(j,f,i){"function"==typeof define?define(i):"undefined"!=typeof module?module.exports=i():f[j]=i(f)}("klass",this,function(j){function f(c){return g.call(typeof c===n?c:function(){},c,1)}function i(h,e,b){return function(){var a=this.supr;this.supr=b[c][h];var k={}.fabricatedUndefined;try{k=e.apply(this,arguments)}finally{this.supr=a}return k}}function d(h,e,b){for(var a in e)e.hasOwnProperty(a)&&(h[a]=typeof e[a]===n&&typeof b[c][a]===n&&m.test(e[a])?i(a,e[a],b):e[a])}function g(h,e){function b(){}
function a(){this.initialize?this.initialize.apply(this,arguments):(e||i&&k.apply(this,arguments),f.apply(this,arguments))}b[c]=this[c];var k=this,l=new b,i=typeof h===n,f=i?h:this,m=i?{}:h;a.methods=function(b){d(l,b,k);a[c]=l;return this};a.methods.call(a,m).prototype.constructor=a;a.extend=g;a[c].implement=a.statics=function(a,b){var c;"string"==typeof a?(c={},c[a]=b):c=a;d(this,c,k);return this};return a}var j=j||this,l=j.klass,n="function",m=/.*/,c="prototype";f.noConflict=function(){j.klass=
l;return this};return f});
StackExchange.topbar=function(){function j(a){StackExchange.options.enableLogging&&console.log("topbar: "+a)}function f(){for(var a=0;a<e.length;a++)e[a].toggle(!1)}var i=klass({name:"",url:"",cssClass:"",button:null,$dialog:null,$loadingPlaceholder:null,$preloadedDialog:null,hasRead:!1}).statics({$corral:$(".js-topbar-dialog-corral")}).methods({isLoading:function(){return null!=this.$loadingPlaceholder},isLoaded:function(){return null!=this.$dialog},isVisible:function(){var a=this.$dialog||this.$loadingPlaceholder;
return null!=a&&a.is(":visible")},toggle:function(a,b){if("boolean"!=typeof a)throw Error("showOrHide is a required parameter");if(!a){if(this.isLoading()){this.showOrHide(!1);return}if(!this.isLoaded())return}this.isLoaded()||this.isLoading()?(!a&&!b&&this.hasRead&&this.markAsRead(),this.showOrHide(a)):this.$preloadedDialog?this.loadChildContent():this.loadDialog();if(a)for(var c=0;c<e.length;c++)this.button!=e[c]&&e[c].toggle(!1,b)},showOrHide:function(a){var b=this.$dialog||this.$loadingPlaceholder;
b&&b.toggle(a);a&&this.$dialog&&(this.hasRead=!0)},loadChildContent:function(){var a=this.$preloadedDialog.find(".child-content");this.$dialog=this.$preloadedDialog;this.positionDialogUnderButton();this.showOrHide(!0);if(this.url){$("<div>",{"class":"child-content-loading"}).addSpinner().appendTo(a);var b=this;this.fetchUrl().done(function(c){a.html(c);b.afterLoad()})}},loadDialog:function(){if(!this.isLoading()){this.$loadingPlaceholder=this.getLoadingPlaceholder().appendTo(i.$corral);this.positionDialogUnderButton();
this.showOrHide(!0);var a=this;this.fetchUrl().done(function(b){a.$dialog=$(b).appendTo(i.$corral);a.afterLoad();b=a.$loadingPlaceholder.is(":visible");a.positionDialogUnderButton();a.showOrHide(b)}).always(function(){a.$loadingPlaceholder.remove();a.$loadingPlaceholder=null})}},afterLoad:function(){StackExchange.gps.bindTrackClicks(this.$dialog)},getLoadingPlaceholder:function(){var a=['<div class="topbar-dialog ',this.cssClass,' dno">','<div class="header">',$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html(),
"</div>",'<div class="modal-content"/>',"</div>"];return $(a.join(""))},positionDialogUnderButton:function(){var a=this.button.$button.outerHeight(),b=this.button.$button.offset().left-e[0].$button.offset().left;(this.$dialog||this.$loadingPlaceholder).css({top:a,left:b})},fetchUrl:function(){j("fetching "+this.url);return $.ajax({type:"GET",url:this.url,dataType:"html"})},markAsRead:function(){this.button.markAsRead();this.isLoaded()&&this.$dialog.find(".unread-item").removeClass("unread-item")},
handleRealtimeMessage:function(){this.clearLoadedDialog()},clearLoadedDialog:function(){this.isLoaded()&&(this.$dialog.remove(),this.$dialog=null,this.hasRead=!1)}}),d=klass({name:"",selector:"",dialog:null,$button:null,onClass:"",unreadCountPrefix:"",queuedUnreadCount:0,showsOnMouseOver:!1}).methods({initialize:function(){this.dialog.name=name;this.dialog.button=this;b.push(this.dialog);var a=this;this.$button=$(this.selector);this.$button.click(function(){a.toggle();return!1});this.showsOnMouseOver&&
this.$button.mouseover(function(){a.showOnMouseOver()});this.onClass="topbar-icon-on"+(this.onClass?" ":"")+this.onClass},toggle:function(a,b){a="boolean"==typeof a?a:!this.$button.hasClass(this.onClass);this.$button.toggleClass(this.onClass,a);this.dialog.toggle(a,b)},showOnMouseOver:function(){for(var a=!1,b=0;b<e.length;b++){var c=e[b];if(c!=this&&c.showsOnMouseOver&&c.isOn()){a=!0;break}}a&&this.toggle(!0,!0)},isOn:function(){return this.$button.hasClass(this.onClass)},markAsRead:function(){this.$button.find(".unread-count").fadeOut();
var a=this.$button.data("unread-class");a&&this.$button.removeClass(a);this.dequeuePendingUnreadCount()},dequeuePendingUnreadCount:function(){this.queuedUnreadCount&&(this.setUnreadCount(this.queuedUnreadCount),this.queuedUnreadCount=0,this.dialog.clearLoadedDialog())},setUnreadCount:function(a){void 0!==a&&(0>=a?(this.queuedUnreadCount=0,this.isOn()||this.markAsRead()):0<a&&(this.isOn()?this.queuedUnreadCount=a:(this.$button.find(".unread-count").text(this.unreadCountPrefix+a).fadeIn(),this.addUnreadClass(),
this.dialog.clearLoadedDialog())))},addUnreadClass:function(){var a=this.$button.data("unread-class");a&&this.$button.addClass(a)},handleRealtimeMessage:function(){}}),g=i.extend({url:"/topbar/site-switcher/site-list",cssClass:"siteSwitcher-dialog",$searchItems:null,isPreloaded:!0,$preloadedDialog:i.$corral.find(".siteSwitcher-dialog")}).methods({afterLoad:function(){this.$dialog.find("#js-site-filter-txt").typeWatch({highlight:!1,wait:250,captureLength:-1,callback:$.proxy(this.filterSites,this)});
this.$searchItems=this.$dialog.find(".js-other-sites li").clone().map(function(){return{title:$(".site-icon",this).attr("title").toLowerCase(),description:$(".site-desc",this).text().toLowerCase(),hostname:$("a",this).first().attr("href"),li:this}});this.$dialog.find("#edit-pinned-sites").click(this.editPinnedSites);this.$dialog.find("#cancel-pinned-sites").click(this.cancelEditPinnedSites);this.supr()},filterSites:function(a){var b=$(".js-other-sites"),c=this.$searchItems;b.empty();if(""!=a){var a=
a.toLowerCase(),e=[];$.each(this.$searchItems,function(b,k){var c={index:b,li:k.li},h=k.title.indexOf(a);k.title==a?c.priority=1:0==h?c.priority=2:-1<h?c.priority=3:-1<k.description.indexOf(a)?c.priority=4:-1<k.hostname.indexOf(a)&&(c.priority=5);c.priority&&e.push(c)});c=e.sort(function(a,b){return a.priority-b.priority||a.index-b.index});StackExchange.using("gps",function(){StackExchange.gps.track("sitesearch.submit",{term:a,numresults:e.length},!1)})}b.append(c.map(function(a){return this&&this.li||
a.li}))},editPinnedSites:function(a){$(".my-sites").hide();$(".pinned-site-editor-container").show();$("#edit-pinned-sites").hide();$("#cancel-pinned-sites").show();a.preventDefault()},cancelEditPinnedSites:function(a){$(".my-sites").show();$(".pinned-site-editor-container").hide();$("#edit-pinned-sites").show();$("#cancel-pinned-sites").hide();a.preventDefault()}}),l=d.extend({name:"SiteSwitcher",selector:".js-site-switcher-button",dialog:new g,showsOnMouseOver:!0,onClass:"icon-site-switcher-on"}),
g=i.extend({url:"/topbar/inbox",cssClass:"inbox-dialog"}),n=d.extend({name:"Inbox",selector:".js-inbox-button",dialog:new g,showsOnMouseOver:!0}).methods({handleRealtimeMessage:function(a){this.setUnreadCount(a.UnreadInboxCount)}}),g=i.extend({url:"/topbar/achievements",cssClass:"achievements-dialog"}).methods({afterLoad:function(){this.alignRep();this.bindDateGroupToggles();this.displayUtcTime();this.supr()},alignRep:function(){var a=this.$dialog.find(".js-items .js-faux-column"),b=0;a.filter(".js-rep-change").each(function(){var a=
$.trim($(this).text()).length;a>b&&(b=a)});0<b&&a.width(6*b)},bindDateGroupToggles:function(){this.$dialog.find(".js-date-group-toggle").click(function(){var a=$(this),b=a.closest(".js-date-group"),c=b.find(".js-items"),b=b.find(".rep-site-container");a.find(".date-group-toggle").toggleClass("toggle-hidden");c.add(b).fadeToggle("fast")});this.$dialog.find(".rep-site-container").on("click",function(a){a.stopImmediatePropagation()})},displayUtcTime:function(){var a=this.$dialog,b=function(){var b=new Date;
b.setTime(b.getTime()+1E3*StackExchange.options.serverTimeOffsetSec);var c=b.getUTCHours(),b=b.getUTCMinutes();10>c&&(c="0"+c);10>b&&(b="0"+b);a.find(".js-utc-time").text(c+":"+b)};b();setInterval(b,6E4)}}),m=d.extend({name:"Achievements",selector:".js-achievements-button",dialog:new g,unreadCountPrefix:"+",showsOnMouseOver:!0}).methods({handleRealtimeMessage:function(a){0===(a.UnreadRepCount||0)&&0<a.UnreadNonRepCount?this.addUnreadClass():this.setUnreadCount(a.UnreadRepCount)}}),g=i.extend({cssClass:"help-dialog"}).methods({loadDialog:function(){this.$dialog=
$(".js-help-dialog").appendTo(i.$corral);this.positionDialogUnderButton();this.showOrHide(!0)}}),c=d.extend({name:"Help",selector:".js-help-button",dialog:new g}),g=i.extend({url:"/topbar/mod-inbox",cssClass:"modInbox-dialog"}).methods({}),h=d.extend({name:"ModInbox",selector:".js-mod-inbox-button",dialog:new g}),e=[],b=[];return{init:function(){1.5<=window.devicePixelRatio&&$(".js-avatar-me").attr("src",function(a,b){return b.replace("?s=24","?s=48")});e.push(new l);e.push(new n);e.push(new m);e.push(new c);
StackExchange.options.user.isModerator&&e.push(new h);$(document).click(function(a){var b;a:{for(b=0;b<e.length;b++){var c=e[b].$button;if(c&&c[0]==a.target){b=!0;break a}}b=!1}!b&&!$.contains(i.$corral[0],a.target)&&f()})},hideAll:f,handleRealtimeMessage:function(a){var b;if(a&&(b=JSON.parse(a))){j("realtime message - "+a);for(var c in b)for(a=0;a<e.length;a++)if(c==e[a].name){e[a].handleRealtimeMessage(b[c]);break}}}}}();
StackExchange.notify=function(){function j(c,h){var e=$("#dismissed-messages");e.val(e.val()+"~"+c+(h?" "+h:"")+"~")}function f(c,h){var e=$("#dismissed-messages").val();return!e?!1:RegExp("~"+c+(h?" "+h:"")+"~").test(e)}function i(c,h,e){var b=parseInt($("body").css("margin-top").match(/\d+/)),c=h*b/c;e?$("body:not(.no-message-slide)").animate({marginTop:c+"px"},"fast","linear"):$("body:not(.no-message-slide)").css("marginTop",c+"px")}var d=0,g=function(c,h){var e=$("#notify-"+c+(h?"-"+h:""));-1==
c?$.cookie("m","0",{expires:90,path:"/"}):-1<c&&$.post("/messages/mark-as-read",{messagetypeid:c,id:h?h:null});j(c,h);d--;e.fadeOut("fast",function(){i(d+1,d,!0);e.remove()})},l=function(c){d++;if(f(c.messageTypeId,c.id))return!1;var h="";c.messageTypeId&&(h=' id="notify-'+c.messageTypeId+(c.id?"-"+c.id:"")+'"');h="<div"+h+' style="display:none"><span class="notify-close">'+$("<a>&times;</a>").attr("title","dismiss this notification").outerHTML()+'</span><span class="notify-text">'+c.text+"</span>";
if(c.showProfile)var e=encodeURIComponent("/users/"+c.userId+"?tab=badges&sort=recent"),h=h+(" "+('See your <a href="'+("/messages/mark-as-read?messagetypeid="+c.messageTypeId+"&returnurl="+e)+'">profile</a>.'));h=$(h+"</div>");h.find(".notify-close").click(function(){c.close&&c.close();g(c.messageTypeId,c.id)});$("#notify-container").append(h);return!0},n=function(){$("#notify-container div").fadeIn("slow")},m=function(c,h){var e=$('<div class="link-more">').append($("<a>").text(function(b){return 1==
b.numNotifications?"view "+b.numNotifications+" more notification":"view "+b.numNotifications+" more notifications"}({numNotifications:c})));$("#notify-container").append(e);e.click(function(){e.detach();for(var b=0;b<h.length;b++)l(h[b]);n()})};return{showMessages:function(c,h){for(var e=0,b=h?2:c.length,a=0;a<b&&a<c.length;a++)l(c[a])&&e++;i(d,e,!1);n();h&&e<c.length&&(b=c.slice(b),m(c.length-e,b))},show:function(c,h){$("body:not(.no-message-slide)").animate({marginTop:"2.5em"},"fast","linear");
l({text:c,messageTypeId:h});n()},close:g,getMessageText:function(c){return $("#notify-"+c+" .notify-text").text()}}}();function moveScroller(){var j=$("#scroller").width(),f=function(){var i=$(window).scrollTop(),d=$("#scroller-anchor").offset().top,g=$("#scroller");i>d?g.height()>$(window).height()?g.css({position:"fixed",top:"",bottom:"0px",width:j}):g.css({position:"fixed",top:"0px",bottom:"",width:j}):i<=d&&g.css({position:"relative",top:"",bottom:""})};$(window).scroll(f).resize(f);f()}
var styleCode=function(){return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);var j=!1;$("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),j=!0);var f;if(f=!$(this).hasClass("prettyprint")){f=$(this);var i=$("#prettify-lang").text();""!=i?(f.addClass(i),f=!0):f=!1}f&&($(this).addClass("prettyprint"),j=!0)});j&&("undefined"!=typeof jtab?jtab.renderimplicit():StackExchange.using("prettify",
function(){StackExchange.prettify.applyCodeStyling()}))}}();
StackExchange.helpers.MagicPopup=function(j){function f(c,h){var e=$("<div id='"+j.id+"'/>").html(h),b=$("<div />").css({overflow:"hidden",position:"absolute","z-index":1002,width:1,height:1,top:0,left:0}).append(e).appendTo("body");window.MathJax&&MathJax.Hub.Typeset(e.attr("id"));var a=j.showing(c,e),k={left:a.left};a.hasOwnProperty("bottom")?(k.bottom=a.bottom,k.top="auto"):k.top=a.top;var d;j.shown&&(d=function(){j.shown(c,e)});b.css(k).animate({height:e.outerHeight()+8,width:e.outerWidth()+8},
300,d);i=function(){b.stop().remove();j.removed&&j.removed(c,e);i=g=null};g=StackExchange.helpers.DelayedReaction(i,5);k=b;a.additional&&(k=k.add(a.additional));k.hover(g.cancel,g.trigger)}var i,d,g,l,n={},m=StackExchange.helpers.DelayedReaction(function(c,h){if(!l&&c){var e;j.cache&&"c_"+c in n?e=$.Deferred().resolve(n["c_"+c]):(e=$.ajax({type:"GET",url:c,dataType:"html"}),j.cache&&e.done(function(b){n["c_"+c]=b}));e.done(function(b){i&&i();""!=b&&f(h,b)})}},500);$(document).delegate(j.selector,
{mouseenter:function(){if(g&&this===d)g.cancel();else return d=this,m.trigger(j.getUrl(this),this),l=!1},mouseleave:function(){l=!0;m.cancel();g&&g.trigger()}})};
StackExchange.tagmenu=function(){function j(g){var g=$(g),d=g.attr("href");if(!d||"/"!=d.charAt(0))return null;d=g.text();if(-1<d.indexOf("*"))return null;g.attr("title","");return"/tags/"+encodeURIComponent(d)+"/subscriber-info"}function f(d,l){var i=$(d),f=i.offset(),c=i.outerHeight(),i={left:f.left},h=f.top+c,c=f.left+l.outerWidth();l.height()+h>$(window).height()+$(window).scrollTop()?i.bottom=$(window).height()-f.top-8:i.top=h;f=Math.max(1024,$(window).width());c>f&&(i.left-=c-f);return i}var i,
d;return{init:function(g){i=g;d||(d=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({selector:".post-tag:not(.user-tag,.no-tag-menu)",id:"tag-menu",getUrl:j,showing:f,shown:function(d,g){i&&i(g,$(d).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))}}}();
StackExchange.usermenu=function(){function j(d,i){var f=$(d).find("img:first"),c=f.offset(),h=f.height(),e=f.width(),b=Math.max(e,h),a=64*h/b,b=64*e/b,k=i.find("img:first").css({width:b,height:a}),j=k.offset();k.css("visibility","hidden");g=f.clone().css({position:"absolute",zIndex:1003,left:c.left,top:c.top,width:e,height:h}).appendTo("body");var r=function(){k[0].complete?(k.css("visibility","visible"),g.fadeOutAndRemove()):setTimeout(r,100)};g.animate({width:b,height:a,top:c.top+j.top},200,r);
i.trigger("userhovershowing",d);return{top:c.top,left:c.left-j.left,additional:g}}function f(d,g){g.trigger("userhovershown")}function i(d){$(d).trigger("userhoverremoved");g.remove()}var d,g;return{init:function(){d||(d=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32",getUrl:function(d){d=/\/users\/([^/]+).*$/.exec($(d).closest(".user-hover").find(".user-details a").attr("href"));return!d?null:"/users/user-info/"+
d[1]},cache:!0,id:"user-menu",showing:j,shown:f,removed:i}))}}}();
StackExchange.chatAd=function(){function j(){var a=$(".question .post-taglist .post-tag");return!a.length?null:a.map(function(a,b){return $(b).text()}).get().join(" ")}function f(a){return 10>a?"0"+a:a}function i(a){var b=new Date;b.setTime(1E3*a);return[b.getUTCFullYear(),"-",f(b.getUTCMonth()+1),"-",f(b.getUTCDate())," ",f(b.getUTCHours()),":",f(b.getUTCMinutes()),":",f(b.getUTCSeconds()),"Z"].join("")}function d(a){var b=Math.floor((new Date).getTime()/1E3)-a,c=b%60,k=Math.floor(b/60),e=Math.floor(b/
3600);if(1>b)return"just now";if(60>b)return function(a){return 1==a.seconds?a.seconds+" sec ago":a.seconds+" secs ago"}({seconds:c});if(3600>b)return function(a){return 1==a.minutes?a.minutes+" min ago":a.minutes+" mins ago"}({minutes:k});if(86400>b)return function(a){return 1==a.hours?a.hours+" hour ago":a.hours+" hours ago"}({hours:e});b=Math.floor(b/86400);if(1==b)return"yesterday";if(2>=b)return b+" days ago";a=new Date(1E3*a);return function(a){return a.month+" "+a.date+" at "+a.hours+":"+a.minutes}({month:r[a.getMonth()],
date:a.getDate(),hours:a.getHours(),minutes:f(a.getMinutes())})}function g(a){var b=$("<div />");b.text(a);return b.html().replace('"',"&quot;")}function l(){$.get(b,null,function(a,b,c){h(a,b,c)})}function n(a){if("!"==a.charAt(0)){a=a.substr(1);if(/^https?:\/\/i.stack.imgur.com\//.test(a))var b=/\?/.test(a)?"&":"?",a=a+(b+"g&s=32");return a}return"https://www.gravatar.com/avatar/"+a+"?s=23&d=identicon&r=PG"}function m(a){for(var b=$('<div class="ad502-users" />'),c=0;c<a.length&&7>c;c++){var k=
a[c],h=k.name;k.lastPost&&(h+=": "+d(k.lastPost));var g=$('<a href="'+(e+"/users/"+k.id)+'" />');$("<img height='23' width='23' />").attr("title",h).attr("src",n(k.emailhash)).appendTo(g);b.append(g)}return b}function c(a){var b=a.user;return(a=a.userid)?'<a href="'+e+"/users/"+a+'">'+g(b)+"</a>":g(b)}function h(b){var h=$("#ad502-rooms");if(!b.error){h.html("");for(var f=b.rooms,j=0;j<f.length&&2>j;j++){var n=f[j],r=e+"/rooms/"+n.id,q=$('<div class="ad502-room"></div>');q.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+
g(n.name)+'"><a href="'+r+'">'+g(n.name)+"</a></span></h3>"));n.messages&&0<n.messages.length&&q.append($('<span title="'+i(n.lastPost)+'" class="ad502-last-message">'+d(n.lastPost)+" - "+c(n.messages[0])+"</span><br>"));n.singleImage?q.append($('<div class="ad502-users"><img src="'+e+"/rooms/users/"+n.id+'.jpeg" /></div>')):q.append(m(n.users));h.append(q)}1<b.activeUsers?$("#h-chat-link").text(b.activeUsers+" People Chatting"):$("#h-chat-link").text("Visit Chat");$("#h-chat-link").attr("title",
function(a){return 1==a.users&&1==a.rooms?a.users+" user active in "+a.rooms+" room the last 60 minutes":1==a.users?a.users+" user active in "+a.rooms+" rooms the last 60 minutes":1==a.rooms?a.users+" users active in "+a.rooms+" room the last 60 minutes":a.users+" users active in "+a.rooms+" rooms the last 60 minutes"}({users:b.activeUsers,rooms:b.activeRooms}))}a<=o&&window.setTimeout(l,1E3*a);a+=k}var e,b,a=180,k=30,o=480,r="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");/^\/questions\/\d+/i.test(window.location.pathname)&&
(o=0);return{init:function(a){e=a.chatUrl;b=a.reloadUrl;if(a.tagBased){var c=j();if(!c)return;b+=(/\?/.test(b)?"&":"?")+"tags="+encodeURIComponent(c)}null===a.preloadData?l():h(a.preloadData,null,null)}}}();
StackExchange.helpers.noDiacritics=function(){var j={"\u00e0\u00e5\u00e1\u00e2\u00e4\u00e3\u00e5\u0105\u0250\u1d44\u1d9b":"a","\u00e6\u01e3\u01fd\u1d02\u1d46":"ae","\u00e7\u0107\u010d\u0109":"c","\u0111\u018d\u00f0\u00d0":"d","\u00e8\u00e9\u00ea\u00eb\u0119\u01dd\u1d08\u1d4c":"e","\u214e":"f","\u011f\u011d\u1d77":"g","\u0125\u0265\u02ae\u1da3":"h","\u00ec\u00ed\u00ee\u00ef\u0131\u1d09\u1d4e":"i","\u0135":"j","\u029e":"k","\u0142":"l","\u026f\u0270\u1d5a\u1dad\u1d1f":"m","\u00f1\u0144":"n","\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u0151":"o",
"\u0153\u0276\u1d14":"oe","\u0159\u0279\u027a\u027b\u02b4\u02b5":"r","\u015b\u015f\u0161\u015d":"s","\u00df":"ss","\u0287":"t","\u00de":"th","\u00f9\u00fa\u00fb\u00fc\u016d\u016f":"u","\u028c\u1dba":"v","\u028d":"w","\u00fd\u0178\u00ff\u028e":"y","\u017c\u017a\u017e":"z"};return function(f){for(var i in j)j.hasOwnProperty(i)&&(f=f.replace(RegExp("["+i+"]","g"),j[i]));return f}}();
function sanitizeAndSplitTags(j,f){for(var j=$.trim(j).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 "),i=j.split(/[\s|,;]+/),d=[],g=0;g<i.length;g++){var l=i[g].toLowerCase();StackExchange.options.site.nonAsciiTags||(l=StackExchange.helpers.noDiacritics(l));l=l.replace(/_/g,"-");l=l.replace(RegExp("[^a-z0-9.#+"+(f?"*":"")+(StackExchange.options.site.nonAsciiTags?"0-9,A-Z,_,a-z,\u00aa,\u00b5,\u00ba,\u00c0-\u00d6,\u00d8-\u00f6,\u00f8-\u02c1,\u02c6-\u02d1,\u02e0-\u02e4,\u02ec,\u02ee,\u0370-\u0374,\u0376-\u0377,\u037a-\u037d,\u0386,\u0388-\u038a,\u038c,\u038e-\u03a1,\u03a3-\u03f5,\u03f7-\u0481,\u048a-\u0523,\u0531-\u0556,\u0559,\u0561-\u0587,\u05d0-\u05ea,\u05f0-\u05f2,\u0621-\u064a,\u0660-\u0669,\u066e-\u066f,\u0671-\u06d3,\u06d5,\u06e5-\u06e6,\u06ee-\u06fc,\u06ff,\u0710,\u0712-\u072f,\u074d-\u07a5,\u07b1,\u07c0-\u07ea,\u07f4-\u07f5,\u07fa,\u0904-\u0939,\u093d,\u0950,\u0958-\u0961,\u0966-\u096f,\u0971-\u0972,\u097b-\u097f,\u0985-\u098c,\u098f-\u0990,\u0993-\u09a8,\u09aa-\u09b0,\u09b2,\u09b6-\u09b9,\u09bd,\u09ce,\u09dc-\u09dd,\u09df-\u09e1,\u09e6-\u09f1,\u0a05-\u0a0a,\u0a0f-\u0a10,\u0a13-\u0a28,\u0a2a-\u0a30,\u0a32-\u0a33,\u0a35-\u0a36,\u0a38-\u0a39,\u0a59-\u0a5c,\u0a5e,\u0a66-\u0a6f,\u0a72-\u0a74,\u0a85-\u0a8d,\u0a8f-\u0a91,\u0a93-\u0aa8,\u0aaa-\u0ab0,\u0ab2-\u0ab3,\u0ab5-\u0ab9,\u0abd,\u0ad0,\u0ae0-\u0ae1,\u0ae6-\u0aef,\u0b05-\u0b0c,\u0b0f-\u0b10,\u0b13-\u0b28,\u0b2a-\u0b30,\u0b32-\u0b33,\u0b35-\u0b39,\u0b3d,\u0b5c-\u0b5d,\u0b5f-\u0b61,\u0b66-\u0b6f,\u0b71,\u0b83,\u0b85-\u0b8a,\u0b8e-\u0b90,\u0b92-\u0b95,\u0b99-\u0b9a,\u0b9c,\u0b9e-\u0b9f,\u0ba3-\u0ba4,\u0ba8-\u0baa,\u0bae-\u0bb9,\u0bd0,\u0be6-\u0bef,\u0c05-\u0c0c,\u0c0e-\u0c10,\u0c12-\u0c28,\u0c2a-\u0c33,\u0c35-\u0c39,\u0c3d,\u0c58-\u0c59,\u0c60-\u0c61,\u0c66-\u0c6f,\u0c85-\u0c8c,\u0c8e-\u0c90,\u0c92-\u0ca8,\u0caa-\u0cb3,\u0cb5-\u0cb9,\u0cbd,\u0cde,\u0ce0-\u0ce1,\u0ce6-\u0cef,\u0d05-\u0d0c,\u0d0e-\u0d10,\u0d12-\u0d28,\u0d2a-\u0d39,\u0d3d,\u0d60-\u0d61,\u0d66-\u0d6f,\u0d7a-\u0d7f,\u0d85-\u0d96,\u0d9a-\u0db1,\u0db3-\u0dbb,\u0dbd,\u0dc0-\u0dc6,\u0e01-\u0e30,\u0e32-\u0e33,\u0e40-\u0e46,\u0e50-\u0e59,\u0e81-\u0e82,\u0e84,\u0e87-\u0e88,\u0e8a,\u0e8d,\u0e94-\u0e97,\u0e99-\u0e9f,\u0ea1-\u0ea3,\u0ea5,\u0ea7,\u0eaa-\u0eab,\u0ead-\u0eb0,\u0eb2-\u0eb3,\u0ebd,\u0ec0-\u0ec4,\u0ec6,\u0ed0-\u0ed9,\u0edc-\u0edd,\u0f00,\u0f20-\u0f29,\u0f40-\u0f47,\u0f49-\u0f6c,\u0f88-\u0f8b,\u1000-\u102a,\u103f-\u1049,\u1050-\u1055,\u105a-\u105d,\u1061,\u1065-\u1066,\u106e-\u1070,\u1075-\u1081,\u108e,\u1090-\u1099,\u10a0-\u10c5,\u10d0-\u10fa,\u10fc,\u1100-\u1159,\u115f-\u11a2,\u11a8-\u11f9,\u1200-\u1248,\u124a-\u124d,\u1250-\u1256,\u1258,\u125a-\u125d,\u1260-\u1288,\u128a-\u128d,\u1290-\u12b0,\u12b2-\u12b5,\u12b8-\u12be,\u12c0,\u12c2-\u12c5,\u12c8-\u12d6,\u12d8-\u1310,\u1312-\u1315,\u1318-\u135a,\u1380-\u138f,\u13a0-\u13f4,\u1401-\u166c,\u166f-\u1676,\u1681-\u169a,\u16a0-\u16ea,\u1700-\u170c,\u170e-\u1711,\u1720-\u1731,\u1740-\u1751,\u1760-\u176c,\u176e-\u1770,\u1780-\u17b3,\u17d7,\u17dc,\u17e0-\u17e9,\u1810-\u1819,\u1820-\u1877,\u1880-\u18a8,\u18aa,\u1900-\u191c,\u1946-\u196d,\u1970-\u1974,\u1980-\u19a9,\u19c1-\u19c7,\u19d0-\u19d9,\u1a00-\u1a16,\u1b05-\u1b33,\u1b45-\u1b4b,\u1b50-\u1b59,\u1b83-\u1ba0,\u1bae-\u1bb9,\u1c00-\u1c23,\u1c40-\u1c49,\u1c4d-\u1c7d,\u1d00-\u1dbf,\u1e00-\u1f15,\u1f18-\u1f1d,\u1f20-\u1f45,\u1f48-\u1f4d,\u1f50-\u1f57,\u1f59,\u1f5b,\u1f5d,\u1f5f-\u1f7d,\u1f80-\u1fb4,\u1fb6-\u1fbc,\u1fbe,\u1fc2-\u1fc4,\u1fc6-\u1fcc,\u1fd0-\u1fd3,\u1fd6-\u1fdb,\u1fe0-\u1fec,\u1ff2-\u1ff4,\u1ff6-\u1ffc,\u203f-\u2040,\u2054,\u2071,\u207f,\u2090-\u2094,\u2102,\u2107,\u210a-\u2113,\u2115,\u2119-\u211d,\u2124,\u2126,\u2128,\u212a-\u212d,\u212f-\u2139,\u213c-\u213f,\u2145-\u2149,\u214e,\u2183-\u2184,\u2c00-\u2c2e,\u2c30-\u2c5e,\u2c60-\u2c6f,\u2c71-\u2c7d,\u2c80-\u2ce4,\u2d00-\u2d25,\u2d30-\u2d65,\u2d6f,\u2d80-\u2d96,\u2da0-\u2da6,\u2da8-\u2dae,\u2db0-\u2db6,\u2db8-\u2dbe,\u2dc0-\u2dc6,\u2dc8-\u2dce,\u2dd0-\u2dd6,\u2dd8-\u2dde,\u2e2f,\u3005-\u3006,\u3031-\u3035,\u303b-\u303c,\u3041-\u3096,\u309d-\u309f,\u30a1-\u30fa,\u30fc-\u30ff,\u3105-\u312d,\u3131-\u318e,\u31a0-\u31b7,\u31f0-\u31ff,\u3400-\u4db5,\u4e00-\u9fc3,\ua000-\ua48c,\ua500-\ua60c,\ua610-\ua62b,\ua640-\ua65f,\ua662-\ua66e,\ua67f-\ua697,\ua717-\ua71f,\ua722-\ua788,\ua78b-\ua78c,\ua7fb-\ua801,\ua803-\ua805,\ua807-\ua80a,\ua80c-\ua822,\ua840-\ua873,\ua882-\ua8b3,\ua8d0-\ua8d9,\ua900-\ua925,\ua930-\ua946,\uaa00-\uaa28,\uaa40-\uaa42,\uaa44-\uaa4b,\uaa50-\uaa59,\uac00-\ud7a3,\uf900-\ufa2d,\ufa30-\ufa6a,\ufa70-\ufad9,\ufb00-\ufb06,\ufb13-\ufb17,\ufb1d,\ufb1f-\ufb28,\ufb2a-\ufb36,\ufb38-\ufb3c,\ufb3e,\ufb40-\ufb41,\ufb43-\ufb44,\ufb46-\ufbb1,\ufbd3-\ufd3d,\ufd50-\ufd8f,\ufd92-\ufdc7,\ufdf0-\ufdfb,\ufe33-\ufe34,\ufe4d-\ufe4f,\ufe70-\ufe74,\ufe76-\ufefc,\uff10-\uff19,\uff21-\uff3a,\uff3f,\uff41-\uff5a,\uff66-\uffbe,\uffc2-\uffc7,\uffca-\uffcf,\uffd2-\uffd7,\uffda-\uffdc":
"")+"-]","g"),"");l=l.replace(/^[#+-]+/,"");l=l.replace(/[.-]+$/,"");0<l.length&&-1==$.inArray(l,d)&&"or"!=l&&"and"!=l&&d.push(l)}return d}
StackExchange.question=function(){function j(){$(window).off("hashchange.highlightDestination").on("hashchange.highlightDestination",function(){var b=window.location.href;0>b.indexOf("#")||(b=b.match(/#(\d+|comment(\d+)_(\d+))/i))&&(b[2]?c(b[2],b[3]):h($(".answer[data-answerid="+b[1]+"]")))}).trigger("hashchange.highlightDestination")}var f=function(b,a,c,e,h,d){return $("<a>",{id:"share-"+e+"-"+b,"class":"share-"+e,title:a?"share link to this question on "+c:"share link to this answer on "+c,text:h,
"data-svc":d})},i=function(b,a){var c=null!=b;b||(b=$("div.question div.post-menu a.short-link"));var e=b.closest(".post-menu, .help-menu");if(b.hasClass("share-link"))e.find(".close-share-tip").click();else{b.addClass("share-link");var h=b.attr("id").substring(10),d=b.closest(".col-section").length?"section":b.closest("div.question").length?"question":"answer",g=b.closest("div.question").length,i="http://"+document.location.host+b.attr("href"),d=("answer"==d?"Answer:":"")+$("#question-header a").text(),
l='<div class="share-tip" style="display:none">'+(g?"share a link to this question":"share a link to this answer")+'<input type="text" style="display:block; width:292px;" value="'+i+'">';StackExchange.options.site.enableSocialMediaInSharePopup&&(l+=$("<div>",{id:"share-icons"}).append(f(h,g,"Google+","gp","share [g+]",1)).append(f(h,g,"Facebook","fb","share [fb]",2)).append(f(h,g,"Twitter","tw","share [tw]",3)).prop("outerHTML"));StackExchange.gps.track("share.show",{location:g?1:2});var j=$(l+'<a class="close-share-tip" style="float:right">close</a></div>');
StackExchange.options.site.enableSocialMediaInSharePopup&&(i=encodeURIComponent(i),d=encodeURIComponent(d),StackExchange.share.gplus($("#share-gp-"+h,j),i,d,"2"),StackExchange.share.facebook($("#share-fb-"+h,j),i,d,"2"),StackExchange.share.twitter($("#share-tw-"+h,j),i,d,"2"),$("#share-icons a",j).click(function(){j.fadeOutAndRemove();StackExchange.gps.track("share.click",{location:g?1:2,service:$(this).data("svc")})}));a&&j.find(".close-share-tip").before('<a id="link-post-'+h+'" style="float:left">cite</a>');
j.appendTo(e).fadeIn(c?"fast":0).bind("removing",function(){b.removeClass("share-link")}).find(".close-share-tip").click(function(){j.fadeOutAndRemove()}).end().find("input[type=text]").select()}},d=function(b){var a=$("#post-form h2:first"),c=a.wrap("<div />").parent(),e=c.wrap("<div />").parent(),h=$("<div />").prependTo(e),d=e.height(),g=$("<div />"),b=$(b),i=parseInt(a.css("margin-bottom")),f=$("#content"),l=$("#wmd-input").outerWidth(),j=f.offset().left>a.offset().left-5&&"visible"!=f.css("overflow-x");
g.css({height:0,overflowY:"hidden"}).appendTo(c).append(b);e.css({height:d,position:"relative"});c.css({position:"absolute",bottom:-i,width:l});h.addClass("answer-help-background").css({position:"absolute",bottom:-i,height:0,width:l});j&&(h.css("left",0),c.animate({paddingLeft:5},1E3));g.animate({height:b.height()+i+10},1E3);h.animate({height:b.height()+i+10+d},1E3);$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(c).fadeIn(1E3).find("a").one("click",function(b){var e=
$(this).parent();setTimeout(function(){e.remove()},1);g.animate({height:0},1E3,function(){g.add(h).remove();a.unwrap().unwrap()});h.animate({height:0},1E3);j&&c.animate({paddingLeft:0},1E3);b.preventDefault()})},g=function(){$.get("/posts/answer-help").then(d)},l,n,m,c=function(b,a){var c="#comment-"+b,e=$(c);e.length?h(e):StackExchange.comments.loadAll($("#comments-link-"+a)).done(function(){h($(c))})},h=function(b){var a=m;b.css({backgroundColor:l}).animate({backgroundColor:a},2E3,"linear",function(){$(this).css("background-color",
"")});b.is(".comment")&&b[0].scrollIntoView(!0)},e=function(b){b=b||{};$(".post-menu a.short-link").live("click",function(a){if(!a.ctrlKey&&!a.metaKey)return i($(this),b.showCitation),!1})};return{initTitleSearch:function(b,a,c){var e=document.title,h=0,d,g;b.attr("autocomplete","off");var i=function(i){var f=b.val();if(!(""==f||f==d&&!0!==i||StackExchange.options.site.newTitleSearchBoxEnabled&&0<$(".title-float-selected:visible").length)){for(var l=f.split(" "),j=0,m=0;m<l.length;m++)0<$.trim(l[m]).length&&
j++;l=(new Date).getTime();m=(l-h)/1E3;!0!==i&&(3>j||5>m)&&!b.hasClass("edit-field-overlayed")||(h=l,d=f,c&&(document.title=f?f+" - "+c:e),a.empty(),StackExchange.helpers.addSpinner(a),g&&g.fadeOutAndRemove(),$.ajax({url:"/search/titles",dataType:"json",data:{title:f},success:function(b){if(b){if(b.notification){var c=StackExchange.postValidation.getSidebarPopupOptions();c.type="info";g=StackExchange.helpers.showMessage(a,b.notification,c)}b.content&&(a.html(b.content),setTimeout(function(){a.find(".answer-link a").attr("target",
"_blank")},1))}},complete:function(){StackExchange.helpers.removeSpinner(a)}}))}},f=!1;a.mouseenter(function(){f=!0}).mouseleave(function(){f=!1});b.keyup(i).blur(function(){var b=function(){h=0;i()};if(f)a.one("mouseleave",b);else b()});return function(a){h=0;i(a)}},showShareTip:i,getQuestionId:function(b){b=(b?b.closest(".question"):$(".question")).data("questionid");if(!b)throw Error("getQuestionId could not find an id");return b},initShareLinks:e,canViewVoteCounts:function(){return n},init:function(b){n=
b.canViewVoteCounts;StackExchange.question.fullInit?StackExchange.question.fullInit(b):StackExchange.question.bindAnonymousVoteDisclaimers();StackExchange.comments.init({autoShowCommentHelp:b.autoShowCommentHelp});e(b);if(b.showAnswerHelp)$("#wmd-input").one("focus",g);b.showCitation&&$("div.share-tip a[id^='link-post-']").live("click",function(){$(this).closest(".post-menu").find(".close-share-tip").click();citation.show($(this))});m=b.backgroundColor;l=b.highlightColor;j()}}}();
StackExchange.question.bindAnonymousVoteDisclaimers=function(){function j(f){var i=$(this),d=i.closest("div.vote"),g=i.prop("className"),l=/vote-up/.test(g),j=/vote-down/.test(g),m=/star/.test(g),g=i.closest(".answer").length;f.preventDefault();if(l||j)if(f=d.find("input").val(),StackExchange.options.isMobile)StackExchange.helpers.fireAndForget("/posts/popup/anon-vote/"+f+"?voteTypeId="+(l?2:3)),l="Thank you for your feedback.<br />"+(g?function(c){return"Please "+c.startAnchor+"log in or register"+
c.endAnchor+" to vote for this answer."}({startAnchor:'<a href="/users/login?returnurl='+escape(document.location)+'">',endAnchor:"</a>"}):function(c){return"Please "+c.startAnchor+"log in or register"+c.endAnchor+" to vote for this question."}({startAnchor:'<a href="/users/login?returnurl='+escape(document.location)+'">',endAnchor:"</a>"})),StackExchange.helpers.showMessage(i,l,{type:"info",position:{my:"left top",at:"right center"},css:{"margin-left":"-10px"}});else{if(i="anon-vote-popup-"+f,!d.is(":working")&&
!$("."+i).length){d.data("working",!0);$(".anon-vote-popup").fadeOutAndRemove();StackExchange.helpers.removeMessages();var c=$('<div class="anon-vote-popup popup">Sending feedback&nbsp;</div>').addClass(i).addSpinner();c.appendTo("body").center().fadeIn("fast");$.ajax({type:"POST",url:"/posts/popup/anon-vote/"+f+"?voteTypeId="+(l?2:3),dataType:"html",success:function(h){c.html(h)},error:function(){c.remove()},complete:function(){d.data("working",!1)}})}}else m&&($(".anon-vote-popup").fadeOutAndRemove(),
l=g?function(c){return"Please "+c.startAnchor+"log in or register"+c.endAnchor+" to favorite this answer."}({startAnchor:'<a href="/users/login?returnurl='+escape(document.location)+'">',endAnchor:"</a>"}):function(c){return"Please "+c.startAnchor+"log in or register"+c.endAnchor+" to favorite this question."}({startAnchor:'<a href="/users/login?returnurl='+escape(document.location)+'">',endAnchor:"</a>"}),StackExchange.helpers.showMessage(i,l,{type:"info",position:{my:"left top",at:"right center"},
css:{"margin-left":"-10px"}}))}$(".vote-up-off, .vote-down-off, .star-off:not(.disabled)").each(function(){var f=$(this);f.data("bound-anonymous")||(f.data("bound-anonymous",!0),f.click(j))});StackExchange.question.bindFetchAcceptedAnswerDates()};
StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var j=$(this);if(!j.is(":working")){j.working(!0);var f=j.closest(".answer").data("answerid");f?$.get("/posts/"+f+"/accepted-answer-date",function(i){j.attr("title",i)}):j.attr("title","")}})};
StackExchange.comments=function(){function j(d,c){this.postId=d;this.jDiv=c;this.jtBody=c.find(" > table > tbody");this.jCommentsLink=$("#comments-link-"+d)}function f(d){var c=(d.constructor===$?d:$(d)).closest(".question, .answer, div[id^='post-']").find(".comments"),d=c.attr("id").replace(/^comments-/,"");if(l[d])return l[d];c=new j(d,c);return l[d]=c}function i(g){var c=$(this),h=0==c.closest(".question, .answer, div[id^='post-']").find(".comments").find(" > table > tbody").data("remaining-comments-count"),
e=c.hasClass("disabled-link"),b=c.data("rep");h&&c.data("anon")&&(StackExchange.options.isMobile?StackExchange.helpers.showMessage(c,"Commenting requires an account with "+b+" reputation",{type:"info",position:{dimissible:!0,my:"left top",at:"right center"}}):d(c.attr("id").replace("comments-link-","")));h&&c.data("reg")&&StackExchange.helpers.showMessage(c,function(a){return"You must have "+a.linkStart+a.rep+" reputation"+a.linkEnd+" to comment"}({rep:b,linkStart:"<a href='/help/privileges/comment'>",
linkEnd:"</a>"}),{type:"info",position:{dimissible:!0,my:"left top",at:"right center"}});(c.data("anon")||c.data("reg"))&&StackExchange.using("gps",function(){StackExchange.gps.track("comment_popup.show")});e||(g.preventDefault(),f(this).addShow(!1))}function d(d){var c="anon-vote-popup-"+d;if(!$("."+c).length){$(".anon-vote-popup").fadeOutAndRemove();StackExchange.helpers.removeMessages();var h=$('<div class="anon-vote-popup popup">Loading&nbsp;</div>').addClass(c).addSpinner();h.appendTo("body").center().fadeIn("fast");
$.ajax({type:"POST",url:"/posts/popup/anon-comment/"+d,dataType:"html",success:function(c){h.html(c)},error:function(){h.remove()}})}}function g(){if(0!=$(".question[data-questionid]").length){var d=StackExchange.question.getQuestionId();$(".comment .comment-date > span").each(function(){var c=$(this),h=c.closest(".answer"),e=h&&h.length?h.data("answerid"):0,h=c.closest(".comment").attr("id").substr(8),e=e?e:d,h="#comment"+h+"_"+e;0<location.href.indexOf("/questions/")?c.wrap('<a class="comment-link" href="{hash}"></a>'.formatUnicorn({hash:h})):
c.wrap('<a class="comment-link" href="/q/{pid}/{hash}"></a>'.formatUnicorn({hash:h,pid:e}))})}}var l={},n=function(){};j.prototype={checkDiscussion:n,ensureInput:n,saveEditingComments:n,restoreEditingComments:n,commentsShown:function(){this.jtBody.data("remaining-comments-count",0)},addShow:function(d){var c=this,h=this.loadAllComments().done(function(){c.checkDiscussion()}),e=this.ensureInput();e&&!d&&e.focus();h.done(function(){e&&0<e.length&&c.jCommentsLink.hide()})},ajax:function(d,c,h,e){h&&
!e&&StackExchange.helpers.addSpinner(h,{"margin-left":"10px"});var b=this;return $.ajax(d).fail(function(a){var k=a.responseText;if(!k||0<=k.indexOf("<html"))k=c||"An error occured";StackExchange.helpers.showErrorMessage(h||b.jDiv,k,{"transient":409==a.status});h&&!e&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},showComments:function(d,c){this.saveEditingComments(c);this.jtBody.html(d);this.restoreEditingComments();if(!0==this.jDiv.data("localized")){var h=
this.jtBody.data("addlink-html");this.jCommentsLink.html($("<div/>").html(h).text());this.jtBody.data("addlink-disabled")&&!this.jCommentsLink.hasClass("disabled-link")&&this.jCommentsLink.addClass("disabled-link")}else this.jCommentsLink=$("#comments-link-"+this.postId),this.jCommentsLink.is(":visible")&&!c&&(h=$("#hidden-comments-link-"+this.postId).removeClass("dno").attr("id","comments-link-"+this.postId).show(),h.length&&(this.jCommentsLink.replaceWith(h),this.jCommentsLink=h));"undefined"!=
typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);g();this.commentsShown()},loadAllComments:function(d,c){this.jDiv.removeClass("dno");var h=0==this.jtBody.data("remaining-comments-count");if(!d&&h)return $.Deferred().resolve().promise();var e=this;return this.ajax({type:"GET",url:"/posts/"+this.postId+"/comments"+(c||""),dataType:"html"},"An error occurred while fetching comments").done(function(b){e.showComments(b)}).promise()}};return{init:function(d){d=d&&d.post||document;l={};$(d).off("click",
"a[id^='comments-link-']",i).on("click","a[id^='comments-link-']",i);d==document&&g()},loadAll:function(d,c){return f(d).loadAllComments(!0,c)},extendPostUi:function(d){for(var c in d)d.hasOwnProperty(c)&&(j.prototype[c]=d[c])},uiForPost:f}}();
StackExchange.share=function(){function j(i,d,g){window.open(i,d,g)||(window.location.href=i)}function f(i,d,g){var d=d+("="+("undefined"!==typeof g?g:"1")),g=i.indexOf("?"),f=i.indexOf("#");return-1==g?-1==f?i+"?"+d:i.substring(0,f)+"?"+d+i.substring(f):-1==f?i+"&"+d:i.substring(0,f)+"&"+d+i.substring(f)}return{gplus:function(i,d,g,l){d=f(d,"sgp",l);i.click(function(){j("https://plus.google.com/share?url="+d,"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},twitter:function(i,
d,g,l){d=f(d,"stw",l);i.click(function(){j("http://twitter.com/share?url="+d+"&ref=twitbtn&text="+g,"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},facebook:function(i,d,g,l){d=f(d,"sfb",l);i.click(function(){j("http://www.facebook.com/sharer.php?u="+d+"&ref=fbshare&t="+g,"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}();
function initTagRenderer(j,f){window.tagRenderer||(window.tagRendererRaw=function(i,d,g){var d=d||"",g=g||"a",l="";d||(j&&-1<$.inArray(i,j)?l="required-tag":f&&-1<$.inArray(i,f)&&(l="moderator-tag"));l=$("<"+g+">").addClass("post-tag").addClass(l).text(i);"a"===g.toLowerCase()&&l.attr({rel:"tag",href:d+"/questions/tagged/"+encodeURIComponent(i),title:"show questions tagged '"+i+"'"});return l.outerHTML()},window.tagRenderer=function(f,d,g){return $(tagRendererRaw(f,d,g))})}
function showFadingHelpText(j){j.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}
function initFadingHelpText(){var j={"wmd-input":"#how-to-format",tagnames:"#how-to-tag","tag-editor":"#how-to-tag",title:"#how-to-title","wmd-input-42":"#how-to-format"},f=$("#wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42"),i=function(d){return $(d).parent().hasClass("tag-editor")?j["tag-editor"]:j[$(d).attr("id")]};f.focus(function(){var d=i(this);f.each(function(){var g=i(this);g!=d&&$(g).hide()});var g=$(d);g.is(":visible")||showFadingHelpText(g)})}
$.fn.extend({postId:function(){var j=this.first();if(!j.hasClass("answer")||!j.hasClass("question"))j=j.closest(".answer, .question");return parseInt(j.find(".vote input")[0].value)}});
StackExchange.newsletterAd=function(){function j(d){d=$('<div id="lightbox-panel" class="popup newsletter-popup" style="display:block"></div>').append($("<div />",{"class":"popup-close"}).append("<a>&times;</a>",{title:"close this popup (or hit Esc)"})).append(d);$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");d.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}
function f(){var d=StackExchange.options.site.name,d=$(['<div style="text-align: left;"><h2 style="margin-bottom: 15px;">',"Subscribe to the "+d+" weekly newsletter",'</h2><p><strong><a href="/users/login?returnurl=/newsletter/signup/redirect">',function(d){return"Create an account on "+d.site+d.endAnchor+" or "+d.loginAnchor+"log in"+d.endAnchor+" if you already have one."}({site:d,loginAnchor:'<a href="/users/login?returnurl=/newsletter/signup/redirect">',endAnchor:"</a>"}),'</strong></p><form><label for="newsletter-email-input">Or, send newsletter emails to:</label> ',
$("<input>",{type:"text",id:"newsletter-email-input",maxlength:"100",title:"your email address"}).prop("outerHTML")," ",$("<input>",{type:"submit",id:"newsletter-email-submit",value:"Subcribe"}).prop("outerHtml"),"</form>",$("#newsletter-ad .privacy-policy-agreement").parent().html(),"</div>"].join(""));d.find("form").submit(function(){var d=$(this),f=d.find("#newsletter-email-input"),i=d.find("#newsletter-email-submit"),j=$.trim(f.val());if(0==j.length)return!1;StackExchange.helpers.addSpinner(d);
$.ajax({url:"/newsletter/signup/anon",type:"POST",dataType:"json",data:{email:j},success:function(c){"confirmed"==c.status&&!c.error?(f.attr("disabled",!0),i.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')):"unconfirmed"==c.status&&!c.error?(f.attr("disabled",!0),i.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),
d.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>"),$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')):d.showErrorMessage(c.error||"there was a problem signing up for the newsletter<br />please try again later")},error:function(){d.showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},
complete:function(){StackExchange.helpers.removeSpinner(d)}});return!1});j(d)}function i(){var d=window.location.pathname.toLowerCase(),g="unknown";"/"==d?g="homepage":"/questions"==d?g="questionlist":0==d.indexOf("/users/edit")?g="userprofile":0==d.indexOf("/questions/tagged/")?g="questionlist_bytag":/^\/questions\/\d+/.test(d)&&(g="questionpage");return g}return{init:function(){StackExchange.using("gps",function(){StackExchange.gps.track("newsletter.show",{newsletter_type:i()},!0)});$("#newsletter-signup").click(function(){var d=
$(this);if(StackExchange.options.user.isAnonymous)return f(),!1;StackExchange.helpers.addSpinner("#newsletter-signup-container");$.ajax({url:"/newsletter/signup",type:"POST",dataType:"json",success:function(g){g.url?window.location.href=g.url:"confirmed"==g.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==g.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):
d.parent().showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},error:function(){d.parent().showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})});$("#newsletter-preview").click(function(){var d=$(window).height(),d=Math.min(600,d-100),d=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',
d,'px;"><iframe src="',$(this).attr("href"),'&suppressPromotion=true" width="660" height="',d,'" frameborder="0"></iframe></div>'].join("");j(d);return!1})},loader:function(d,g){var d=g||d,f=$(".newuser-greeting");$.ajax({url:"/newsletter/targetted/ajax",data:{domain:d},success:function(d){$("#newsletter-ad").remove();f.empty().append($(d))},complete:function(){f.attr("class","").attr("style","")}});g||(window.sessionStorage.tNewsletter=d+"-continued")}}}();
(function(j,f,i,d){var g=!("selectionStart"in j("<input type='text' />")[0]);j.fn.caret=function(j,n){var m,c,h=this[0];if("object"===typeof j&&"number"===typeof j.start&&"number"===typeof j.end)m=j.start,c=j.end;else if("number"===typeof j&&"number"===typeof n)m=j,c=n;else if("string"===typeof j)-1<(m=h.value.indexOf(j))?c=m+j[f]:m=null;else if("[object RegExp]"===Object.prototype.toString.call(j)){var e=j.exec(h.value);null!=e&&(m=e.index,c=m+e[0][f])}if("undefined"!=typeof m)return g?(e=this[0].createTextRange(),
e.collapse(!0),e.moveStart("character",m),e.moveEnd("character",c-m),e.select()):(this[0].selectionStart=m,this[0].selectionEnd=c),this[0].focus(),this;if(g)if(c=document.selection,"textarea"!=this[0].tagName.toLowerCase()){e=this.val();m=c[i]()[d]();m.moveEnd("character",e[f]);var b=""==m.text?e[f]:e.lastIndexOf(m.text);m=c[i]()[d]();m.moveStart("character",-e[f]);var a=m.text[f]}else m=c[i](),c=m[d](),c.moveToElementText(this[0]),c.setEndPoint("EndToEnd",m),b=c.text[f]-m.text[f],a=b+m.text[f];else b=
h.selectionStart,a=h.selectionEnd;m=h.value.substring(b,a);return{start:b,end:a,text:m,replace:function(c){return h.value.substring(0,b)+c+h.value.substring(a,h.value[f])}}}})(jQuery,"length","createRange","duplicate");
StackExchange.captcha=function(){return{init:function(j,f){function i(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()}var d=$(['<div id="lightbox-panel" class="popup captcha-popup" style="display: block; text-align: left;"><div class="popup-close">',$("<a>",{title:"close this popup (or hit Esc)",text:"\u00d7"}).prop("outerHTML"),"</div>",j,"</div>"].join("")),g=d.find("form:first");$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");d.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(i);
$.getScript("https://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(StackExchange.options.site.recaptchaPublicKey,"recaptcha",{theme:"clean",lang:StackExchange.options.site.recaptchaAudioLang,custom_translations:{visual_challenge:"Get a visual challenge",audio_challenge:"Get an audio challenge",refresh_btn:"Get a new challenge",instructions_visual:"Type the text:",instructions_audio:"Type what you hear:",help_btn:"Help",play_again:"Play sound again",cant_hear_this:"Download sound as MP3",
incorrect_try_again:"Incorrect. Try again.",image_alt_text:"reCAPTCHA challenge image",privacy_and_terms:"Privacy & Terms"},callback:Recaptcha.focus_response_field});StackExchange.helpers.enableSubmitButton(g);g.submit(function(){StackExchange.helpers.disableSubmitButton(g);g.find('input[type="submit"]').addSpinnerAfter();$.ajax({url:"/captcha",type:"POST",dataType:"json",data:g.serialize(),success:function(d){d.captchaError?(StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(g),
g.find(".form-error").html(d.captchaError),Recaptcha.reload()):(i(),f(d))},error:function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.enableSubmitButton(g);StackExchange.helpers.showErrorMessage(g,"An error occurred submitting the CAPTCHA")}});return!1})})}}}();
StackExchange.gps=function(){function j(c,b,a,d){$(c).find(b).each(function(b){$(this).addClass("js-gps-track").data("gps-track",a+"({ position:"+(b+1)+d+" })")})}function f(c){$(c||document).find(".js-gps-track").off("click.gps").one("click.gps",function(){var b=$.trim($(this).data("gps-track"));if(b){for(var a=[],b=b.match(/([a-z._]+)(\([^)]+\))?/ig),c=0;c<b.length;c++){var e=b[c];if(0>e.indexOf("{"))a.push([e,{}]);else{for(var h=e.match(/([a-z._]+)\s*\(\s*\{([^}]+)\}\s*\)/i),e=h[1],h=$.trim(h[2]).match(/[^,]+/ig),
g={},f=0;f<h.length;f++){var i=h[f],j=i.indexOf(":"),l=$.trim(i.substr(0,j)),i=$.trim(i.substr(j+1)),j=parseInt(i);g[l]=NaN!=j?j:i}a.push([e,g])}}for(b=0;b<a.length;b++)c=a[b],d(c[0],c[1],!0)}})}function i(){var d;d=localStorage[c];d=!d?[]:JSON.parse(d);if(0<d.length){for(var b=(new Date).getTime(),a=[],k=0;k<d.length&&20>a.length;k++){var h=d[k],g=b-h.now;0>g||36E5<g?n(h):a.push(h)}0<a.length&&m(a)}}function d(c,b,a){c={evt:c,properties:b||{},now:(new Date).getTime()};l(c);a||m(c)}function g(){StackExchange._gps_track&&
($.each(StackExchange._gps_track,function(c,b){l(b)}),delete StackExchange._gps_track)}function l(d){d&&StackExchange.options&&StackExchange.options.user&&(d.properties&&!d.properties.user_type&&(d.properties.user_type=StackExchange.options.user.user_type),!d.ab&&StackExchange.options.user.ab&&(d.ab=StackExchange.options.user.ab));var b=localStorage[c];b?(b=JSON.parse(b),b.push(d),b=JSON.stringify(b)):b=JSON.stringify([d]);d="addToPending "+JSON.stringify(d);StackExchange.options.enableLogging&&console.log("gps: "+
d);localStorage[c]=b}function n(d){var b=localStorage[c];if(b){for(var b=JSON.parse(b),d=JSON.stringify(d),a=-1,k=0;k<b.length;k++){var h=JSON.stringify(b[k]);if(d==h){a=k;break}}-1!=a&&(b.splice(a,1),0==b.length?localStorage.removeItem(c):localStorage[c]=JSON.stringify(b))}}function m(c){$.isArray(c)||(c=[c]);var b=JSON.stringify(c);StackExchange.options.enableLogging&&console.log("gps: sending "+b);$.ajax({type:"POST",url:"/gps/event",data:b,success:function(){for(var a=0;a<c.length;a++)n(c[a])}})}
var c="gps-pending",h=!1;return{init:function(c){if(h)return!0;h=!0;if(!c||!window.localStorage)return StackExchange.gps.track=function(){},delete StackExchange._gps_track,!1;g();i();j(".tagged-questions-page, .questions-page, .tags-page",".js-gps-related-tags .post-tag","related_tags.click",", item_type:1");j(".question-page",".js-gps-related-questions .spacer","related_questions.click");j(".question-page .post-taglist",".post-tag","question_tags.click",", location:1");j(".question-page #sidebar .tagged",
".post-tag","question_tags.click",", location:2");f();return!0},track:d,sendPending:i,bindTrackClicks:f}}();
StackExchange.openid=function(){function j(c){c&&StackExchange.gps.track("openid.click",{openid_provider:c,location:n},!0)}function f(c,d){var e=d.find(".option-extra-fields");e.hide();d.find(".yahoo-button").click(function(){e.hide();i(c,"yahoo")});var b=function(a){var b="."+a+"-option";e.show();e.find("> div:not("+b+")").hide();e.find(b+", .extra-field-container").show();d.find(".extra-field").val("").focus();b=d.find(".extra-field-submit");b.unbind("click");b.click(function(){i(c,a,d.find(".extra-field").val())})};
d.find(".blogger-button").click(function(){b("blogger")});d.find(".aol-button").click(function(){b("aol")})}function i(c,d,e){d=m[d];e&&(d=d.replace("{username}",e));c.find(".use-facebook").val("false");c.find(".manual-openid").val(d);c.find(".submit-openid").click()}function d(c){c.find(".use-facebook").val("true");c.find(".manual-openid").val("");c.find(".submit-openid").click()}function g(c){return function(){StackExchange.using("editor",function(){StackExchange.cardiologist.ensureDraftSaved(c)})}}
function l(c,d,e,b){var a=c.find(".manual-openid").val();c.find(".use-facebook").val();g(function(){var c=$('<form method="post" action="/users/authenticate?returnurl='+encodeURIComponent(d)+'"></form>');if(a){var g=$('<input type="hidden" name="openid_identifier" />');c.append(g);g.val(a)}else{var g=$('<input type="hidden" name="oauth_version" />'),f=$('<input type="hidden" name="oauth_server" />');c.append(g);c.append(f);g.val("2.0");f.val("https://www.facebook.com/dialog/oauth")}c.append("<input type='hidden' name='fkey' value='"+
StackExchange.options.user.fkey+"' />");e&&b&&($('<input type="hidden" name="anon_vote_type" />').val(e).appendTo(c),$('<input type="hidden" name="anon_vote_hash" />').val(b).appendTo(c));StackExchange.navPrevention.stop();c.hide().appendTo("body").submit()})()}var n="unknown",m={yahoo:"http://yahoo.com/",google:"https://www.google.com/accounts/o8/id",aol:"http://openid.aol.com/{username}",blogger:"http://{username}.blogspot.com/"};return{initPostLogin:function(c,h){var e=decodeURIComponent(h);"/questions/ask"===
e&&(n="question_ask");var b=$(c),a=b.find(".new-login-left"),k=b.find(".new-login-right"),m=a.find(".show-more-options");m.click(function(){m.hide();k.show();return!1});k.find(".hide-more-options").click(function(){m.show();k.hide();return!1});b.removeClass("dno");f(b,k);a.find(".google-login").click(function(){j("Google");i(b,"google")});a.find(".facebook-login").click(function(){j("Facebook");d(b)});a.find(".stackexchange-login").click(g(function(){j("Stack Exchange");StackExchange.navPrevention.stop();
window.location="/users/login#create-account"}));b.find(".submit-openid").click(function(){l(b,e)})},initAnonPopup:function(c,h,e,b,a){var k=decodeURIComponent(h);n=e;c.find(".google-login").click(function(){j("Google");i(c,"google")});c.find(".facebook-login").click(function(){j("Facebook");d(c)});c.find(".stackexchange-login").click(function(){j("Stack Exchange");window.location="/users/login#create-account"});c.find(".submit-openid").click(function(){l(c,k,b,a)})}}}();StackExchange.loggedIn={};
var profileLink=function(){var j,f=!1,i,d,g=function(){return $(".profile-link")},l=function(a){a||(a=g());return a.hasClass("profile-link-on")},n=function(a,b){b.toggleClass("profile-link-on",a);$(".profile-triangle").toggleClass("profile-triangle-on",a)},m=function(a){if(!a.data("loading")){a.data("loading",!0);var b=a.find(".profile-wrapper");b.addSpinner();$.ajax({type:"GET",url:"/users/profile-link-stats",dataType:"html",success:function(a){$(a).hide().appendTo(b).fadeIn("fast");b.find(".profile-footer").click(profileLink.click);
c()},error:function(){a.data("loading",!1)},complete:StackExchange.helpers.removeSpinner})}},c=function(){var a=new Date;a.setTime(a.getTime()+1E3*d);var b=a.getUTCHours(),a=a.getUTCMinutes();10>b&&(b="0"+b);10>a&&(a="0"+a);$(".profile-popup .popup-clock .popup-time").text(b+":"+a)},h=StackExchange.helpers.DelayedReaction(function(){profileLink.show()},450,{always:function(){e.cancel()}}),e=StackExchange.helpers.DelayedReaction(function(){profileLink.hide()},1E3,{always:function(){h.cancel()}}),b=
function(a){a.hover(h.trigger,e.trigger)};return{init:function(a,c,h,e){var i=g(),j=$(".profile-triangle");i.attr("href");f=c;$(location).attr("pathname");d=e||0;j.click(profileLink.click);c||b(i.add(j));$(document).click(function(a){l(i)&&a.target!=i[0]&&a.target!=j[0]&&!$.contains($(".profile-wrapper")[0],a.target)&&profileLink.hide()})},click:function(){var a=g();e.cancel();h.cancel();l(a)?profileLink.hide():profileLink.show()},show:function(a,d){if(!a||"number"==typeof a)a=g();d||(d=$(".profile-popup"));
if(!d.length){var h=a,e=$('<div class="profile-popup" style="position:absolute; display:none;"><div class="profile-wrapper"></div></div>');e.insertBefore(h);f||b(e);d=e}l(a)||(d.fadeIn("fast"),m(d),n(!0,a),i=new Date);j||(j=setInterval(c,2E4),c())},hide:function(a,b){if(i&&!(500>(new Date).getTime()-i.getTime())){if(!a||"number"==typeof a)a=g();b||(b=$(".profile-popup"));l(a)&&(b.fadeOut("fast"),n(!1,a));j&&(clearInterval(j),j=null)}}}}();
StackExchange.tagPreferences=function(){function j(a,b,c){var d="";"undefined"!=typeof forUserId&&(d=forUserId);$.post("/users/save-preference",{fkey:StackExchange.options.user.fkey,key:a,value:b,forUserId:d},c)}var f=[],i=$('<table><tr><td class="vt"><input type="text" id="interestingTag" name="interestingTag"></td>                             <td class="vt"><input id="interestingAdd" type="button" value="Add"></td> </tr></table>'),d=$('<table><tr><td class="vt"><input type="text" id="ignoredTag" name="ignoredTag"></td>                             <td class="vt"><input id="ignoredAdd" type="button" value="Add"></td> </tr></table>'),
g=function(a,b){return a.map(function(a,b){return $(b).text()}).filter(function(a,c){if(!b)return!0;var d;/\*/.test(c)&&(d=RegExp(c.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(a=0;a<b.length;a++){var h=b[a];if(c===h||d&&d.test(h))return!1}return!0}).map(function(a,b){var c;c=b.replace(/#/g,"\u00f1").replace(/\+/g,"\u00e7").replace(/\./g,"\u00fb");return/\*/.test(c)?"div.tags:regex(class, t-"+c.replace(/\*/g,".*")+")":"div.t-"+c}).get().join(",")},l=function(a,b,d,h,e,k){for(var g=$(a).val(),
f=sanitizeAndSplitTags(g,!0),i=!1,l=0;l<f.length;l++)0!=$.trim(f[l]).length&&($(b).children().each(function(){$(this).text()==f[l]&&($(this).fadeTo(500,0.1).fadeTo(500,1),i=!0)}),i||(g=$.URLEncode(f[l]),g=$("<a>").attr({id:f[l],href:"/questions/tagged/"+g,"class":h,title:"show questions tagged '"+f[l]+"'"}).text(f[l]),$(b).append(g),$(b).append(" "),n(d)),i=!1);$(a).val("");e&&$(a).focus();k||j(d,$(b).text());c()},n=function(a){a=20==a?"#interestingTags > .post-tag:last":25==a?"#ignoredTags > .post-tag:last":
40==a?"#interestingTags > .post-tag":45==a?"#ignoredTags > .post-tag, #remainingIgnored > .post-tag":"#interestingTags > .post-tag, #ignoredTags > .post-tag";$("<span>").addClass("delete-tag").attr("title","remove this tag").appendTo($(a)).click(function(a){var a=$(a.target).closest(".post-tag"),b=a.closest("div"),d=b.is("#ignoredTags")?25:b.is("#interestingTags")?20:-1;-1===d?console.log("removeTag: unknown container. Stopping execution. '"+b.text()+"'"):(a.remove(),j(d,b.text()),c());return!1})},
m=function(){return $("#hideIgnoredTrue").is(":checked")?!0:$("#hideIgnoredFalse").is(":checked")?!1:$("#hideIgnored").is(":checked")},c=function(a,b){if(b)for(var c=0;c<b.length;c++)-1==f.indexOf(b[c])&&f.push(b[c]);var b=f,c=$("#ignoredTags > a, #remainingIgnored > a"),d=$("#interestingTags > a");if(!a||!(0==c.length&&0==d.length)){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");c=g(c,b);d=g(d,b);if(0<c.length){var h=m()?"tagged-ignored-hidden":"tagged-ignored";
$(c).closest("div.question-summary").addClass(h)}0<d.length&&$(d).closest("div.question-summary").addClass("tagged-interesting")}},h=function(a,d){var h=$("#tag-menu"),e;"favorite"==d&&(e=$("#ignoredTags a").filter(function(){return $(this).text()==a}),e.add(e.next()).remove(),$("#interestingTag").val(a),l("#interestingTag","#interestingTags",20,"post-tag",!1,!0));"ignore"==d&&(e=$("#interestingTags a").filter(function(){return $(this).text()==a}),e.add(e.next()).remove(),$("#ignoredTag").val(a),
l("#ignoredTag","#ignoredTags",25,"post-tag",!1,!0));"clear"==d&&(e=$("#ignoredTags a").filter(function(){return $(this).text()==a}),e.add(e.next()).remove(),e=$("#interestingTags a").filter(function(){return $(this).text()==a}),e.add(e.next()).remove(),c());StackExchange.helpers.addSpinner(h);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(a)+"/favorite",data:{action:d,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(c){b(h.html($(""+c)),a)},error:function(){},complete:StackExchange.helpers.removeSpinner})},
e=function(a,c){var d=$("#tag-menu");StackExchange.helpers.addSpinner(d);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(a)+"/subscription",data:{unsubscribe:c,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(c){b(d.html($(""+c)),a)},error:function(){},complete:StackExchange.helpers.removeSpinner})},b=function(a,b){a.find(".tm-se-subscription").click(function(){e(b,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?
h(b,"ignore"):$(this).hasClass("tm-favorite-clear")?h(b,"favorite"):$(this).hasClass("tm-favorite-ignore")&&h(b,"clear")})},a=function(a){a&&n(40);$("#add-interesting").append(i);i.find("#interestingAdd").unbind("click").bind("click",function(){l("#interestingTag","#interestingTags",20,"post-tag user-tag",!0);$("#tag-subscriptions").removeClass("dno")});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#interestingTag")});t()},k=function(a){$("#tag-pref-prefs").removeClass("dno");
a&&n(45);$("#add-ignored").append(d);d.find("#ignoredAdd").unbind("click").bind("click",function(){l("#ignoredTag","#ignoredTags",25,"post-tag user-tag",!0)});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag")});t()},o=function(a){if($.contains(document.documentElement,a.target)&&!$(a.target).closest("#interesting-tags").length){var a=0<$("#interestingTags > .post-tag").length,b=0<$("#ignoredTags > .post-tag, #remainingIgnored > .post-tag").length;a?($("#add-interesting table").remove(),
$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno").addClass("dno")):($("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno"));b?($("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno"),$("#addIgnoredTag").removeClass("dno").addClass("dno")):($("#add-ignored table").remove(),
$("#edit-ignored").removeClass("dno").addClass("dno"),$("#addIgnoredTag").removeClass("dno"));$("#interesting-tags .delete-tag").remove();u();$(document).off("click",o)}},r=function(){$("#addInterestingTag").on("click",function(){$(this).addClass("dno");a(!1)});$("#addIgnoredTag").on("click",function(){$(this).addClass("dno");k(!1)});$("#edit-interesting").on("click",function(){$(this).addClass("dno");$("#addInterestingTag").addClass("dno");$("#tag-subscriptions, #ignored-wrapper").removeClass("dno");
$("#edit-ignored").length||k(!0);a(!0)});$("#edit-ignored").on("click",function(){$(this).addClass("dno");k(!0)});$("#showRemainingIgnored").on("click",function(){$("#showRemainingIgnored").addClass("dno");$("#remainingIgnored").removeClass("dno")})},t=function(){$(document).on("click",o)},v=!1,u=function(){v&&$("#addIgnoredTag, #edit-ignored, #addInterestingTag, #edit-interesting, #showRemainingIgnored").trigger("click")};return{applyPrefs:c,isIgnored:function(a){var b=$("#ignoredTags > a, #remainingIgnored > a");
if(m()&&(b=g(b,!0),0<b.length))return 0<$(a).find(b).length},forceEditMode:function(){v=!0},init:function(){StackExchange.tagmenu.init(b);0!=$("#interestingTags").length&&(r(),t(),$("#hideIgnored, #hideIgnoredTrue, #hideIgnoredFalse").click(function(){j(30,m());c()}),u())}}}();
StackExchange.question.fullInit=function(j){window.votesCast=j.votesCast;StackExchange.vote.init(j.questionId);StackExchange.question.bindSuggestedEditPopupLinks();StackExchange.vote_bounty.init(j);if(/^#autocomment/.test(window.location.hash)){var f=$(".comments-link:first"),i="#comment-"+window.location.hash.substring(12),d=function(){var d=$(i),f=$("<span><b>Trivial answer converted to comment</b></span>");d.find(".comment-date").append($("<br>")).append(f);d.css({backgroundColor:j.highlightColor});
d.animate({backgroundColor:j.backgroundColor},2E3,"linear",function(){$(this).css("background-color","")});$(i)[0].scrollIntoView(!0)};j.totalCommentCount&&j.shownCommentCount&&j.totalCommentCount!=j.shownCommentCount?StackExchange.comments.loadAll(f).done(d):d()}};
StackExchange.question.bindSuggestedEditPopupLinks=function(){function j(f){var i=f.parent(),d=f.attr("id").substring(13);f.data("working")||(f.data("working",!0).addSpinnerAfter({padding:"3px 0"}),$.ajax({type:"GET",url:"/review/suggested-edit-popup/"+d,dataType:"html",success:function(d){var f=$(['<div id="lightbox-panel" class="popup popup-suggested-edit no-auto-close" style="display: block;"><div class="popup-controls"><div class="handle"></div><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div></div><div class="suggested-edit-container">',
d,"</div></div>"].join("")),d=$(window).height();f.find(".popup-suggested-edit").css({"max-height":d-100});var j=$('<div id="lightbox" class="no-esc-remove"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");f.appendTo(i).css("height","600px").center().css("height","").fadeIn("fast");var m=function(){var c=$.Event("suggestedEditPopupClose");f.trigger(c);c.isDefaultPrevented()||(StackExchange.helpers.closePopups(f),StackExchange.helpers.closePopups(j))},c=function(c){if(27==
c.which)return m(),!1},d=function(){m();return!1};$(document).bind("keydown",c);j.mousedown(d);f.find(".popup-close").click(d);f.bind("popupClose",function(){$(document).unbind("keydown",c)});StackExchange.helpers.bindMovablePopups()},error:function(d){i.showErrorMessage(d.responseText&&200>d.responseText.length?d.responseText:"Unable to load suggested edit - please try again")},complete:function(){StackExchange.helpers.removeSpinner();f.removeData("working")}}))}$('div.post-menu a[id^="edit-pending-"]').each(function(){$(this).unbind("click").click(function(){j($(this));
return!1})})};
StackExchange.vote=function(){var j=StackExchange.helpers,f={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12},i=function(a){var a=a?a.closest("div.vote"):$("div.vote"),b=0<$("body.read-only").length;a.find(".vote-up-off, .vote-down-off").each(function(){var a,c,d,k=$(this);b?a="Voting is disabled while the site is in readonly mode":(a=k.hasClass("vote-up-off"),c=(a?h:e)(k),d=0<k.closest(".answer").length,a=
(d?a?"This answer is useful":"This answer is not useful":a?"This question shows research effort; it is useful and clear":"This question does not show any research effort; it is unclear or not useful")+(StackExchange.loggedIn&&c?" (click again to undo)":""));k.attr("title",a)})},d=function(a){a||(a="div.vote");$(a).find(".vote-up-off").unbind("click").click(function(){n($(this))});$(a).find(".vote-down-off").unbind("click").click(function(){m($(this))})},g=function(a){$.each(a,function(){var a=$("div.vote:has(input[value="+
this.PostId+"])");switch(this.VoteTypeId){case f.upMod:a.find(".vote-up-off").addClass("vote-up-on");break;case f.downMod:a.find(".vote-down-off").addClass("vote-down-on");break;case f.favorite:a.find(".star-off").addClass("star-on");a.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId)}});votesCast=null},l=function(a){null==window.votesCast?$.ajax({type:"GET",url:"/posts/"+a+
"/votes",dataType:"json",success:g}):g(window.votesCast);d();i()},n=function(b){var c=b.parent().find(".vote-up-off"),d=b.parent().find(".vote-down-off"),g=h(c),i=e(d);k(b,g?-1:i?2:1);a(c,d);g||c.addClass("vote-up-on");o(b,g?f.undoMod:f.upMod)},m=function(b){var c=b.parent().find(".vote-up-off"),d=b.parent().find(".vote-down-off"),g=e(d),i=h(c);k(b,g?1:i?-2:-1);a(c,d);g||d.addClass("vote-down-on");o(b,g?f.undoMod:f.downMod)},c=function(){return $("div.vote a[id^='vote-accepted-']")},h=function(a){return a.hasClass("vote-up-on")},
e=function(a){return a.hasClass("vote-down-on")},b=function(a){return a.closest("div.vote").find("input[name=_id_]").val()},a=function(a,b){a.removeClass("vote-up-on");b.removeClass("vote-down-on")},k=function(a,b){var c=a.siblings("span.vote-count-post"),d;if(0<c.find(".vote-count-separator").length){d=parseInt(c.children(":first").text(),10);var e=Math.abs(parseInt(c.children(":last").text(),10));d-=e;s(c)}else d=parseInt(c.text(),10);c.text(d+b)},o=function(a,c){(a?a.closest("div.vote"):$("div.vote")).find(".vote-up-off, .vote-down-off").unbind("click");
var d=b(a);r(a,d,c,t,{ltu:a.closest("div.vote").find("input[name=_ltu_]").val()})},r=function(a,b,c,d,e,h){var k={fkey:StackExchange.options.user.fkey};if(e)for(var f in e)k[f]=e[f];var g=function(){$.ajax({type:"POST",url:"/posts/"+b+"/vote/"+c,data:k,dataType:"json",success:function(c){c.Warning?confirm(c.Message)?(k.ignoreWarnings="true",g()):h&&h():(d(a,b,c),h&&h())},error:function(){a.parent().showErrorMessage("An error has occurred - please retry your request.");h&&h()}})};g()},t=function(b,
c,e){if(e.Success){e.Message&&b.parent().showInfoMessage(e.Message);if(e.ShowShareTip){var h=$(b).closest(".question,.answer").find('div.post-menu a:contains("link")');StackExchange.question.showShareTip(h)}e.LastVoteTypeId==f.upMod?$(document).trigger("upVote",c):e.LastVoteTypeId==f.downMod?$(document).trigger("downVote",c):$(document).trigger("undoVote",c)}else if(window.console&&window.console.firebug&&(!e.Message||5>e.Message.length))b.parent().showErrorMessage("FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site.");
else if(e.Message?b.parent().showErrorMessage(e.Message,{"transient":!0}):b.parent().showErrorMessage("An error has occurred - please retry your request."),a(b,b),b.parent().find("span.vote-count-post").text(e.NewScore),e.LastVoteTypeId){var c=e.LastVoteTypeId,k;c==f.upMod?(h=".vote-up-off",k="vote-up-on"):c==f.downMod&&(h=".vote-down-off",k="vote-down-on");h&&b.closest("div.vote").find(h).addClass(k)}d(b.parent());i(b)},v=function(){$(".star-off:not(.disabled)").live("click",function(a){u($(this));
a.preventDefault()})},u=function(a){if(!a.data("loading")){a.data("loading",!0);var c=b(a)||a.siblings("input[type=hidden][name=_id_]").val(),d=a.parent().find("div.favoritecount b"),e=parseInt("0"+d.text().replace(/^\s+|\s+$/g,""),10),h=function(){a.hasClass("star-on")?(a.removeClass("star-on"),d.removeClass("favoritecount-selected").text(0>=e--?"":e)):(a.addClass("star-on"),d.addClass("favoritecount-selected").text(++e))};h();r(a,c,f.favorite,function(b,c,d){a.data("loading",!1);d.Success||(h(),
a.parent().showErrorMessage(d.Message))})}},y=function(a,b){$("div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']").unbind("click").die("click").live("click",function(c){c.preventDefault();var c=$(this),d=c.attr("id").substring(12),e=-1<c.text().indexOf("undelete"),h=c.data(e?"undelete-prompt":"delete-prompt");h||(h=StackExchange.options.user.isModerator?"":e?"Vote to undelete this post?":"Vote to delete this post?");confirm(h)&&r(c,d,e?f.undeletion:f.deletion,a||A,b)}).unbind("hover").die("hover").live("hover",
function(){var a=$(this);if(a.hasClass("load-tooltip-on-hover")){a.removeClass("load-tooltip-on-hover");var b="/posts/"+a.attr("id").substring(12)+"/delete-tooltip";$.get(b,function(b){a.attr("title",b)})}})},A=function(a,b,c){var d=-1<a.text().indexOf("undelete");c&&c.Success?(a.html(c.Message),a.addClass("load-tooltip-on-hover"),0>c.NewScore?(a=0<$(".question:has(a[id='delete-post-"+b+"'])").length?".question, div.answer":"#answer-"+b,a=$(a),d?document.location.reload(!0):($("div.question-status:has(span:contains('delete'))").show(),
a.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("a[id^='comments-link-']").addClass("comments-link-deleted"))):a.parent().showInfoMessage(d?"Your undelete vote has been recorded":"Your delete vote has been recorded")):(d=c&&c.Message?c.Message:d?"A problem occurred during undeletion":"A problem occurred during deletion",j.showErrorMessage(a.parent(),d))},B=function(){var a=$(this),
b=a.attr("id").substring(14),d=c();a.is(":working")||(a.parent().addSpinner(),d.working(!0),r(a,b,f.acceptedByOwner,function(b,c,e){e.Success?(d.removeClass("vote-accepted-on"),parseInt(e.Message,10)==f.acceptedByOwner&&a.addClass("vote-accepted-on")):a.parent().showErrorMessage(e.Message,{"transient":e.Transient});a.parent().removeSpinner();d.working(!1).trigger("update")}))},q=function(){var a=$(this),b=a.hasClass("vote-accepted-on")?"unaccept":"accept";a.attr("title",a.data("title-"+b)).text(a.data("verb-"+
b))},w=!1,z=function(a){if(!w){w=!0;var b=a.closest("div.vote").children('input[type="hidden"]').val();a.addSpinner();$.ajax({type:"GET",url:"/posts/{postId}/vote-counts".formatUnicorn({postId:b}),dataType:"json",success:function(b){StackExchange.helpers.removeMessages();a.html('<div style="color:green">'+b.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+b.down+"</div>").unbind("click").data("bound",!1).css("cursor","default").attr("title",function(a){return a.upCount+
" up / "+a.downCount+" down"}({upCount:Math.abs(+b.up),downCount:Math.abs(+b.down)}))},error:function(b){a.removeSpinner().parent().showErrorMessage(b.responseText&&100>b.responseText.length?b.responseText:"An error occurred during vote count fetch",{"transient":409==b.status})},complete:function(){w=!1}})}},s=function(a){(a||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").attr("title","View upvote and downvote totals").css("cursor","pointer").click(function(){z($(this))}).data("bound",
!0)},p=function(a){l(a);$("div.post-menu a[id^='protect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(13);confirm("Are you sure you want to protect this question?")&&$.ajax({type:"POST",url:"/question/protect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1});$("div.post-menu a[id^='unprotect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(15);confirm("Are you sure you want to unprotect this question?")&&
$.ajax({type:"POST",url:"/question/unprotect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1});StackExchange.vote_closingAndFlagging.init();v()};return{init:function(a){!StackExchange.options.user.isRegistered?StackExchange.question.bindAnonymousVoteDisclaimers():p(a);c().not(":data(bound)").on({click:B,update:q}).data("bound",!0).trigger("update");StackExchange.question.bindFetchAcceptedAnswerDates();StackExchange.question.canViewVoteCounts()&&
s();y()},up:n,down:m,vote_init:l,favorite_init:v,delete_init:y,bindFetchVoteCounts:s,highlightExistingVotes:g,submit:r,voteTypeIds:f,getPostId:b}}();
StackExchange.vote_closingAndFlagging=function(){function j(a){$("#popup-close-question").remove();var b=s.closest(".post-menu");0==b.length&&(b=s.parent());!1===s.data("isclosed")&&s.addSpinnerAfter({padding:"0 3px"});return $.ajax({type:"GET",url:"/flags/questions/{questionId}/close/popup".formatUnicorn({questionId:z}),dataType:"html"}).done(function(c){p=$(c).elementNodesOnly();p.appendTo(b);f();q&&q.closeShowPopup?q.closeShowPopup(p,s):a&&p.center().fadeIn("fast");StackExchange.helpers.bindMovablePopups()}).fail(function(a){a.responseText?
b.showErrorMessage(a.responseText,{"transient":409==a.status}):b.showErrorMessage("Unable to load popup - please try again")}).always(function(){StackExchange.helpers.removeSpinner()})}function f(){p.find(".popup-close").click(function(){StackExchange.helpers.closePopups(".popup")});p.on("popupClose",function(){x&&x.remove()});p.find("input[type=radio]").click(g);$("#close-question-form").submit(function(b){b.preventDefault();a();return!1});$(".retract-close-vote").click(function(){u($(this))});$(".action-list a").attr("target",
"_blank");i();d()}function i(){var a=$(".close-as-duplicate-pane"),b=a.find("#search-text");a.on("show",function(){$("#search-text").focus();$("#close-question-form .popup-submit").enable($("#original-question-id").val())}).addClass("handles-submit-button-enabling");b.helpOverlay().typeWatch({highlight:!1,wait:750,captureLength:-1,callback:function(){e(b)}})}function d(){var a=p.find(".off-topic-other-comment-container"),b=a.find("textarea"),c=a.closest("li").find("input[type=radio]"),d=$.trim(b.val());
b.charCounter({target:a.find(".text-counter"),min:30,max:500,setIsValid:function(a){a=a&&$.trim(b.val())!=d;b.is(":focus")&&p.find(".popup-submit").enable(a)}});c.click(function(){a.show();b.focus();var c=b.val();b.val("").val(c)});b.focus(function(){c.is(":checked")||c.attr("checked","checked")})}function g(){var a=$(this),b=a.closest("li");if(!b.hasClass("action-selected")){var c=p.find(".popup-subpane").filter(function(){var b=a.data("subpane-name");return b&&b==$(this).data("subpane-name")}),
d=p.find(".popup-submit");c.length?(l(c,$(".popup-active-pane"),!0),c.hasClass("handles-submit-button-enabling")||d.disable()):(d.enable(),p.find(".popup-active-pane li.action-selected").removeClass("action-selected"),b.addClass("action-selected"))}}function l(a,b,c){p.find(".popup-active-pane").removeClass("popup-active-pane").hide();p.find(".popup-title").html(a.data("title"));c&&(c=b.data("breadcrumb")||b.data("title"),m(c,function(){l(b,a,!1);n(a)}));n(a);a.addClass("popup-active-pane").show().trigger("show").asyncLoad()}
function n(a){a.find("input[type=radio]:checked").removeAttr("checked");a.find("li.action-selected").removeClass("action-selected");p.find(".popup-submit").disable()}function m(a,b){var c=$(".popup-title-container .popup-breadcrumbs"),d=$("<span>").addClass("breadcrumb");$("<a>").text(a).click(function(){d.nextAll().andSelf().remove();b()}).appendTo(d);$("<span>").addClass("arrow").html("&gt;").appendTo(d);d.appendTo(c)}function c(){m("Flagging",function(){p.hide();x.fadeIn("fast");l(p.find("#pane-main"),
p.find(".popup-active-pane"),!1)})}function h(a){a=a.find(".list-originals");0==a.children().length?a.hide():(a.show(),b(a,!0),styleCode(),a.find(".item").click(function(){var a=$(this).find(" .post-link > a").addSpinner({"padding-left":"3px"}),b=$("#search-text").hideHelpOverlay().val(a.attr("href"));e(b,a);return!1}).hover(function(){$(this).toggleClass("hover")}))}function e(a,c){var d=a.closest(".popup-subpane"),e=d.find(".preview"),k=d.find(".list-container"),f=d.find(".search-errors").empty(),
g=$("#original-question-id"),i=d.closest("#popup-close-question").find(".popup-submit");i.disable();e.html("").hide();0!=$.trim(a.val()).length&&(c||d.find(".search-spinner").addSpinner(),$.ajax({type:"GET",url:"/posts/popup/close/search-originals/"+$("#popup-close-question").data("questionid"),data:{q:a.val()},dataType:"html"}).done(function(a){a=$(a).elementNodesOnly().mathjax();if(a.hasClass("show-original"))k.hide(),b(a),e.empty().append(a).show(),a.find(".question .show-title a").attr("target",
"_blank"),a.find(".post-tag").addClass("user-tag"),g.val(a.find(".question").data("questionid")),i.enable();else if(a.hasClass("list-originals"))k.empty().append(a).show(),h(k);else throw"these are not the results you were looking for";}).fail(function(a){f.text(a.responseText&&100>a.responseText.length?a.responseText:"An error occurred while searching; please try again");i.disable();g.val("");d.find(".navi-container .instructions").remove()}).always(function(){StackExchange.helpers.removeSpinner()}))}
function b(a,b){var c=$(".close-as-duplicate-pane .original-display").find(".navi-container"),d=a.find(".navi"),e=$("#search-text");if(b)c.empty();else{var h=c.find(".navi");if(1!=h.length)return;h.empty();$("<a>").text(h.data("abbr")).click(function(){h.html(h.data("text")).siblings().remove();c.siblings(".preview").hide();c.siblings(".list-container").show();$("#original-question-id").val("");$("#popup-close-question").find(".popup-submit").disable();$(".close-as-duplicate-pane").find(".search-errors").empty();
e.val(h.data("search-text")).focus()}).appendTo(h)}d.data("search-text",e.val()).text(d.data("text")).prependTo(c)}function a(){var a=p.find(".popup-submit");a.attr("disabled")||($(".remaining-votes").addSpinner({position:"absolute",margin:"18px 0 0 3px"}),a.disable(),a=function(a,b){return p.find(a+' input[type=radio][name="'+b+'"]:checked').val()},$.ajax({type:"POST",url:"/flags/questions/{questionId}/close/add".formatUnicorn({questionId:z}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,
closeReasonId:a("#pane-main","close-reason"),duplicateOfQuestionId:$("#original-question-id").val(),closeAsOffTopicReasonId:a(".close-as-off-topic-pane","close-as-off-topic-reason"),belongsOnBaseHostAddress:a(".migration-pane","migration"),offTopicOtherText:p.find(".off-topic-other-comment-container textarea").val(),offTopicOtherCommentId:p.find(".close-as-off-topic-pane input[type=radio]:checked").data("other-comment-id"),originalOffTopicOtherText:p.find('.off-topic-other-comment-container input[name="original_text"]').val()}}).done(function(a){o(a)}).fail(function(){s.parent().showErrorMessage("An error occurred; please try again")}).always(function(){p.find(".popup-close").click()}))}
function k(){s.is(":working")||(s.working(!0).addSpinner({margin:"0 3px"}),$.ajax({type:"POST",url:"/flags/questions/{questionId}/reopen/add".formatUnicorn({questionId:z}),dataType:"json",data:{fkey:StackExchange.options.user.fkey}}).done(function(a){o(a)}).fail(function(){s.working(!1).parent().showErrorMessage("An error occurred; please try again")}).always(function(){StackExchange.helpers.removeSpinner()}))}function o(a){a.isClose="QuestionClose"==a.FlagType;a.isRecommendClose="QuestionRecommendClose"==
a.FlagType;a.isReopen="QuestionReopen"==a.FlagType;a.verb=a.isRecommendClose?"flag":a.isReopen?"reopen":"close";var b=s;a.isClose&&s.is('[class*="flag-post-"]')&&(b=s.parent().find("a[class*='close-question']"));a.Success?r(a,b):v(a,b)}function r(a,b){if(!q||!q.closeCallback||!q.closeCallback(b,a,a.isRecommendClose)){var c=function(){var a=window.location.href.splitOnLast("#")[0];0>a.indexOf("noredirect=1")&&(a+=(0>a.indexOf("?")?"?":"&")+"noredirect=1");window.location.href=a};a.ResultChangedState?
c():(("Duplicate"==a.CloseReason||a.CloseAsOffTopicReasonId==B)&&0==b.closest(".mod-post-header").length&&StackExchange.comments.loadAll(b),a.Tooltip&&b.attr("title",a.Tooltip),a.Message?t(a,b):c())}}function t(a,b){b.parent().showInfoMessage(a.Message);if(!a.isRecommendClose&&0<a.Count){var b=b.closest(".post-menu").find(".close-question-link"),c=b.find(".existing-flag-count");0==c.length&&(b.text(b.text()+" "),c=$('<span class="existing-flag-count">').appendTo(b));c.text(a.Count)}}function v(a,
b){var c=a.Message;if(!c)switch(a.verb){case "flag":c="A problem occurred when trying to flag";break;case "reopen":c="A problem occurred when trying to reopen";break;case "close":c="A problem occurred when trying to close"}if(!q||!q.closeErrorCallback||!q.closeErrorCallback(c))b.parent().showErrorMessage(c),a.RefreshClient&&setTimeout(function(){location.reload(!0)},2500)}function u(a){!a.is(":disabled")&&confirm("Are you sure (you cannot vote again after retracting)?")&&(a.disable().addSpinnerBefore({position:"absolute",
margin:"18px 0 0 -25px"}),$.ajax({type:"POST",url:"/flags/questions/{questionId}/close/retract".formatUnicorn({questionId:z}),dataType:"json",data:{fkey:StackExchange.options.user.fkey}}).done(function(a){t(a,s)}).fail(function(){s.parent().showErrorMessage("An error occurred; please try again")}).always(function(){p.find(".popup-close").click()}))}function y(a){x=a;C();x.find(".js-flag-load-close").unbind("click").click(function(){w?w(x,$(this)):E($(this))});x.find("form").submit(function(a){a.preventDefault();
F();return!1});A();q&&q.flagShowPopup?q.flagShowPopup(a,s):StackExchange.helpers.bindMovablePopups()}function A(){x.find(".action-list > .disabled-action").each(function(){var a=$(this);a.find("input[type=radio]").attr("disabled","disabled");a.find(".action-name").addClass("disabled-button")})}var B=3,q,w,z,s,p,x,C=function(){var a=x.find(".popup-submit"),b=x.find('textarea[name="otherText"]'),c=x.find('input[value="PostOther"]');b.focus(function(){b.hideHelpOverlay();c.is(":checked")||c.attr("checked",
"checked")}).charCounter({min:10,max:500,setIsValid:function(b){c.is(":checked")&&a.enable(b)}});c.click(function(){b.focus()})},D=function(a){if(a.is(".mod-attention-subform")){var b=a.find('textarea[name="otherText"]').helpOverlay();0<a.find('input[value="PostOther"]:checked').length?b.focus():0==a.find("input:radio:checked").length&&a.closest(".popup").find(".popup-submit").disable()}},E=function(a){var b=x.fadeOut("fast").promise();p||(a.siblings(".action-name").addSpinner({margin:"0 5px"}),b=
j(!1));b.done(function(){c();a.is(".js-flag-load-close-duplicate")&&p.find("input[value=Duplicate]").click();p.center().fadeIn("fast")});x.find(".popup-submit").disable();a.removeAttr("checked");x.find(".action-list li").trigger("hide-action")},F=function(){x.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var a=x.find('input[name="top-form"]:checked').val(),b="";"PostOther"==a&&(b=x.find('textarea[name="otherText"]').val());$.ajax({type:"POST",url:"/flags/posts/{postId}/add/{flagType}".formatUnicorn({postId:z,
flagType:a}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,otherText:b}}).always(function(){StackExchange.helpers.closePopups(".popup")}).done(function(a){if(!q||!q.flagCallback||!q.flagCallback(s,a))a.ResultChangedState?location.reload(!0):a.Message&&(a.Success?s.parent().showInfoMessage(a.Message):s.parent().showErrorMessage(a.Message))}).fail(function(a){a=a.responseText&&100>a.responseText.length?a.responseText:"An error occurred during flagging";s.parent().showErrorMessage(a)})};
return{close_afterLoadListOriginals:h,updateCloseLinkCount:t,init:function(a){q||(q=a);$("body").off("click",".close-question-link, .close-question-button").on("click",".close-question-link, .close-question-button",function(a,b){a.preventDefault();var c=$(this),d=!!b;z=s=p=x=null;z=c.data("questionid");s=c;c.is(":data(isclosed)")?(d||confirm("Nominate this question for reopening?"))&&k():j(!0)});$("body").off("click",".flag-post-link, .flag-post-button").on("click",".flag-post-link, .flag-post-button",
function(a){a.preventDefault();a=$(this);z=s=p=x=null;z=a.data("postid");s=a;a.loadPopup({url:"/flags/posts/{postId}/popup".formatUnicorn({postId:z}),loaded:y,hideDescriptions:!1,subformShow:D,dontCenter:q&&q.flagShowPopup})})}}}();
(function(){function j(b,a){this.commentId=b;this.jComment=a;this.postUi=n(a)}function f(b){var b=b.constructor===$?b:$(b),b=b.hasClass("comment")?b:b.closest(".comment"),a=b.attr("id").replace(/^comment-/,"");return new j(a,b)}function i(b,a,c){/Android/.test(navigator.userAgent)&&$(a,b).bind("touchstart",function(a){a=$(a.target);if(!a.is(c))return!0;var b=a.data("events");if(b&&b.click&&b.click.length)return!0;a.click(function(){}).attr("data-nothing-to-see-here","X");return!0})}function d(b,a,
c){$(".comments",b).delegate(a,"click",function(){f(this)[c]()});i(b,".comments",a)}var g,l=StackExchange.comments,n=l.uiForPost;l.extendPostUi({ensureInput:function(){var b=this.jDiv.find('form[id^="add-comment-"]'),a=this;return b.children().length?(b.add(b.prev()).show(),b.find("textarea")):c(b,"Add Comment",!1,function(){a.submitNewComment()})},saveEditingComments:function(b){var a=this.editingComments=[];this.jDiv.find("form[id^='edit-comment-']:visible").each(function(){var c=f(this);if(c.commentId!==
b){var d=$(this).find("textarea");a.push([c.commentId,d.val()])}})},restoreEditingComments:function(){this.editingComments&&($.each(this.editingComments,function(b,a){var c=a[1],d=$("#comment-"+a[0]);d.length&&f(d).edit(c,!0)}),delete this.editingComments)},commentsShown:function(){try{var b=this.jDiv.find("form[id^='add-comment-'] textarea:focus");b.length&&StackExchange.comments.tabCompleter.init(b);this.jtBody.data("remaining-comments-count",0)}catch(a){}},submitNewComment:function(){var b=this.jDiv.find('form[id^="add-comment-"]'),
a=b.find("textarea"),c=this,d=b.find('input[type="submit"]').parent();this.ajax({type:"POST",url:"/posts/"+this.postId+"/comments",dataType:"html",data:{comment:a.val(),fkey:StackExchange.options.user.fkey}},"An error occurred during comment submission",d).done(function(d){c.showComments(d);a.val("").keyup().blur();StackExchange.helpers.enableSubmitButton(b);b.add(b.prev()).hide();c.jCommentsLink.show();$(document).trigger("comment",c.postId)}).fail(function(){StackExchange.helpers.enableSubmitButton(b)})},
checkDiscussion:function(){var b=this.jDiv.find("tr.is-comment-discussion"),a=this;if(b.length){b.remove();var c=this.jDiv.find(".comment-form");c.find(".discussion-info").length||($("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>Please avoid extended discussions in comments. Would you like to <a href='#'>automatically move this discussion to chat?</a></div>").find("a").click(function(b){$(this).unbind("click");b.preventDefault();a.ajax({url:"/posts/"+a.postId+"/move-discussion-to-chat",
data:{fkey:StackExchange.options.user.fkey},type:"POST"},"An error occurred when trying to move the discussion to chat",c).done(function(a){a.success?window.location.href=a.message:StackExchange.helpers.showErrorMessage(c,a.message)})}).end().prependTo(c),b.remove())}}});j.prototype={undoVoteUp:function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var b=this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),
a=this;this.submitVote(0).done(function(c){c.Success?(b.closest("tr").siblings("tr").show(),a.renderScore(c.NewScore),b[0].title="this comment adds something useful to the post",$(document).trigger("undoUpVoteComment",a.postUi.postId)):b.removeClass("comment-up-off comment-up").addClass("comment-up-on")}).fail(function(a){409===a.status&&b.addClass("comment-up-undo");b.removeClass("comment-up").addClass("comment-up-on")})}},voteUp:function(){var b=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),
a=this;this.submitVote(2).done(function(c){c.Success?(b.removeClass("comment-up-off").closest("tr").siblings("tr").hide(),b.addClass("comment-up-undo"),a.renderScore(c.NewScore),b[0].title="you've voted for this as a useful comment (click again to undo)",$(document).trigger("upVoteComment",a.postUi.postId)):b.removeClass("comment-up-on").addClass("comment-up")}).fail(function(){b.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var b=this;confirm("Really delete this comment?")&&
this.submitVote(10).done(function(a){var c=b.postUi.jDiv.find("textarea");a.Success&&(0===b.jComment.siblings(".comment").length&&!c.is(":visible")&&b.jComment.closest(".comments").addClass("dno"),b.jComment.remove())})},flag:function(){var b=this;this.jComment.find(".comment-flag").loadPopup({url:"/flags/comments/{commentId}/popup".formatUnicorn({commentId:this.commentId}),loaded:function(a){var c=a.find('textarea[name="other-text"]').charCounter({min:6,max:200,setIsValid:function(){f()}}),d=a.find('input[name="comment-flag-type"]'),
e=d.filter('[value="'+c.data("flag-type")+'"]'),h=a.find(".text-counter"),f=function(){var b=0<d.filter(":checked").length;if(e.is(":checked")){var f=!c.is(":visible"),b=c.show().val().length;h.show();b=6<=b&&200>=b;f&&c.focus()}else c.hide(),h.hide();a.find(".popup-submit").enable(b)};d.click(f);f();a.find("form").submit(function(){var h=d.filter(":checked").val(),f=e.is(":checked")?c.val():"";a.fadeOutAndRemove();b.submitFlag(h,f).done(function(a){a.Success?a.ResultChangedState?b.jComment.remove():
b.jComment.find(".comment-flag, .comment-up").fadeOutAndRemove():a.Message&&b.jComment.find(".comment-flag").closest("td").showErrorMessage(a.Message)});return!1})}})},submitFlag:function(b,a){var c=this.jComment.find(".comment-actions");return this.postUi.ajax({type:"POST",url:"/flags/comments/{commentId}/add/{flagTypeId}".formatUnicorn({commentId:this.commentId,flagTypeId:b}),data:{fkey:StackExchange.options.user.fkey,otherText:a},dataType:"json"},"An error occurred during flagging",c,!0)},edit:function(b,
a){var d=this.jComment,e=d.find('form[id^="edit-comment-"]'),h=this;e.length&&(d.find(" > td > *").not(e).hide(),d.find("td:last").addClass("comment-form"),d=c(e,"Save Edits",!0,function(){h.submitEdit()}),d.val(b||e.find("div").text()),e.show(),a||d.focus())},cancelEdit:function(){var b=this.jComment,a=b.find('form[id^="edit-comment-"]');a.children("table").remove();a.hide();a.unbind("submit");b.find("td:last").removeClass("comment-form");b.find(" > td > *").not(a).show()},submitEdit:function(){var b=
this.jComment.find('form[id^="edit-comment-"]'),a=this;this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/edit",dataType:"html",data:{comment:b.find("textarea").val(),fkey:StackExchange.options.user.fkey}},"An error occurred during comment submission",b).done(function(b){a.postUi.showComments(b,a.commentId)}).fail(function(){StackExchange.helpers.enableSubmitButton(b)})},submitVote:function(b,a){var c=this.jComment.find("td:first"),d={fkey:StackExchange.options.user.fkey};if(a)for(var e in a)d[e]=
a[e];return this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/vote/"+b,dataType:"json",data:d,success:function(a){!a.Success&&a.Message&&StackExchange.helpers.showErrorMessage(c,a.Message)}},"An error occurred during voting",c,!0)},renderScore:function(b){var a="";b&&0<b&&(a+='<span title="number of \'useful comment\' votes received" class="'+(5>b?"":15>=b?"warm":30>=b?"hot":"supernova")+'">'+b+"</span>");this.jComment.find(".comment-score").html(a)}};var m=function(b){b.find("textarea").keyup(function(a){13==
a.which&&!a.shiftKey&&!$(this).prev("#tabcomplete:visible").length&&b.submit()}).keypress(function(a){if(13==a.which&&!a.shiftKey)return!1})},c=function(b,a,c,d){a=b.hasClass("mobile-comment-form")?'<textarea name="comment" rows="2"></textarea><input type="submit" value="'+a+'"/>':'<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input tabindex="0" type="submit" value="'+a+'"/>'+(c?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>';
b.append(a);b.find("textarea").attr("placeholder",b.data("placeholdertext"));c&&b.find(".edit-comment-cancel").click(function(){f(b).cancelEdit()});var e=!1,c=b.find("textarea");c.charCounter({min:15,max:600,setIsValid:function(a){e=a}}).focus(function(){StackExchange.comments.tabCompleter.init($(this))});b.find(".comment-help-link").click(h);if(g)c.one("focus",h);b.submit(function(){e?(StackExchange.helpers.disableSubmitButton(b),d(b)):b.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},
100)});return!1});StackExchange.options.desc||m(b);return c},h=function(b){var a=$(this).closest("tbody"),c=a.find(".comment-help-link"),d=$(".comment-help",a),e;if("click"==b.type)e=0==d.length||!d.is(":visible"),e||(h.manualOnly=!0);else{if(h.manualOnly)return;e=!0}var f=function(){c.text(e?"hide help":"help")};0<d.length?e?d.slideDown(f):d.slideUp(f):e&&(b=$("<tr />").appendTo(a),b=$("<td colspan='2' />").appendTo(b),h.helpText?(b.html(h.helpText),$(".comment-help",b).slideDown(f)):h.inProgress||
(h.inProgress=!0,StackExchange.helpers.addSpinner(c),b.load("/posts/comment-help",function(a){h.helpText=a;StackExchange.helpers.removeSpinner();$(".comment-help",this).slideDown(f);h.inProgress=!1})))},e=l.init;l.init=function(b){e(b);g=b&&b.autoShowCommentHelp;b=b&&b.post||document;d(b,".comment-up","voteUp");d(b,".comment-delete","delete");d(b,".comment-flag","flag");d(b,".comment-edit","edit");d(b,".comment-up-undo","undoVoteUp");$("form.comment-form-expanded",b).each(function(){n(this).addShow(!0)})};
l.extendCommentUi=function(b){for(var a in b)b.hasOwnProperty(a)&&(j.prototype[a]=b[a])}})();
StackExchange.comments.tabCompleter=function(){function j(d){var e=$("#tabcomplete");e.empty();!(5<d.length)&&d.length&&$.each(d,function(b,a){var d=$("<li/>").text(a).appendTo(e);a.toLowerCase()==c.toLowerCase()&&d.addClass("chosen")})}function f(){var c=m.caret().start,d=m.val(),b=!1;if(/@[^\s!?();:+"].*@/.test(d)){if(!/`/.test(d))return null;b=!0}var a=d.substring(c).search(/[\s!?();:+"\[\]\\]/);-1==a&&(a=d.length-c);var f=d.substring(0,c+a).match(/@[^\s!?();:+"\[\]\\]*$/);if(!f)return null;var f=
f[0].substr(1),a=c+a,g=a-f.length;return b&&/@[^\s!?();:+"]/.test(d.substr(0,g-1))?null:{start:g,pos:c,end:a,name:f}}function i(c){var d=f();if(d.name===c)m.is(":focus")||m.focus();else{var b=m.val();m.val(b.substring(0,d.start)+c+b.substring(d.end));c=d.start+c.length;m.caret(c,c)}}function d(d){var e;if(9==d.which){e=$("#tabcomplete li");if(!e.length)return;var b=e.filter(".chosen").removeClass("chosen"),b=d.shiftKey?b.prev():b.next();b.length||(b=d.shiftKey?e.last():e.first());e=b.addClass("chosen").text()}else if(27==
d.which){e=$("#tabcomplete li");if(!e.length)return;e=c;c=null}else return;d.preventDefault();i(e)}function g(d){if(d.which)switch(d.which){case 9:case 16:case 17:case 18:case 220:return}if(d=f()){if(c!=d.name){var e=[];c=d.name;var b;b=d.name?RegExp("^"+StackExchange.helpers.noDiacritics(d.name.replace(/ /g,"").toLowerCase()).replace(/\./g,"\\."),"i"):/^\W/;for(var a=n.length,g=0;g<a;g++){var i=n[g].name;(d.name?StackExchange.helpers.noDiacritics(i.replace(/ /g,"").toLowerCase()):i).match(b)&&e.push(i.replace(/ /g,
""))}j(e)}}else c=null,j([])}function l(c){return!c?null:parseInt(c.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null}var n,m,c=null;$("#tabcomplete > li").live("mousedown",function(){var c=$(this);c.parent().find("li.chosen").removeClass("chosen");i(c.addClass("chosen").text());return!1});return{init:function(f){if(!StackExchange.options.isMobile){var e=f.closest("div.comments"),b=e.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']"),b=l(b.attr("href")),a=[];
e.find("a.comment-user").each(function(b,c){var d=c.firstChild;if(3!==d.nodeType)StackExchange.debug.log("unexpected structure in comment owner link");else{var d=d.nodeValue,e=l($(c).attr("href"));e!==StackExchange.options.user.userId&&a.push({id:e,name:d})}});n=[];for(var e={},i=a.length-1;0<=i;i--){var j=a[i];e[j.id]||(n.push(j),e[j.id]=!0)}$("#tabcomplete").remove();m&&m.unbind($.browser.opera?"keypress":"keydown",d).unbind("keyup click",g);0===n.length||1===n.length&&n[0].id===b?m=null:(m=f,c=
null,$("<ul id='tabcomplete' />").insertBefore(f),f.bind("keydown",d).bind("keyup click",g))}}}}();
StackExchange.inlineEditing={init:function(){function j(f,i,d,g){i.fadeIn(d,g);f.hide()}$(".post-menu .edit-post").live("click",function(f){if(!f.ctrlKey&&!f.altKey&&!f.metaKey&&!f.shiftKey){var i=$(this),d=i.closest(".question, .answer");if(1==i.data("handling-event"))return!1;i.data("handling-event",1);d.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);$("#show-editor-button").hide();i.addSpinner();var g=d.hasClass("answer"),l=d.find(".postcell,.answercell"),
n=l.find("> *"),m=$('<div class="inline-editor"/>').hide().appendTo(l);m.load(i.attr("href")+"-inline",function(c,f){var e;m.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))});StackExchange.helpers.removeSpinner();d.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(d).offset().top-55},200);if("error"==f)StackExchange.helpers.showErrorMessage(l,"The post could not be loaded"),m.remove(),i.data("handling-event",0);else{j(n,m,300);
var b=function(a){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;StackExchange.navPrevention.stop()}$("#show-editor-button").show();i.data("handling-event",0);j(m,a,300,function(){m.remove()});a.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(d).offset().top-55},200);return!1},a=function(){v.unbind("keyup",k);A.trigger(e)},k=function(){A.trigger(v[0].value);return!0};m.find(".cancel-edit").click(function(){a();
b(n)});var o=StackExchange.helpers.DelayedReaction(function(a){$.ajax({type:"POST",data:{hide:a},url:"/user/save-pref/hide-preview-for-inline-editing"})},1E3,{sliding:!0}),r=m.find(".hide-preview");r.click(function(){var a=m.find(".wmd-preview"),b=a.is(":visible");b?(a.slideUp(),r.text("show preview")):(a.slideDown(),r.text("hide preview"));o.trigger(b);return!1});m.find('input[type="submit"]').attr("id").replace("submit-button","");var t=m.find("form"),v=m.find("#title"),u=$("#question-header a"),
y=v.data("question-state-suffix"),y=y?" "+y:"";e=v.val();var A=StackExchange.helpers.DelayedReaction(function(a){"undefined"!=typeof a&&(u.text(a+y),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,u[0]]))},{sliding:!0});v.keyup(k);m.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(c){if(!0===c.ctrlKey&&13==c.keyCode)return t.submit(),!1;if(27==c.keyCode)return a(),b(n),!1});StackExchange.using("postValidation",function(){StackExchange.postValidation.initOnBlurAndSubmit(t,
g?2:1,g?"answer":"question",!1,function(a){var c=$(a.html).hide();l.replaceWith(c);g||$("#question-header a").text(a.title);$("html").trigger("inline-edit-complete",[c,a.title]);styleCode();b(c)})})}});return!1}})}};
StackExchange.vote_bounty=function(){var j,f=function(d,f,g){f=$(".bounty-vote");if(g.Success){$(".bounty-notification").remove();j=!1;var c=d.closest("td.votecell").parent().find("span.reputation-score:last");g.Message&&(g=$(g.Message),c.text(g.text()).attr("title",g.attr("title")));g=d.closest("div.vote").find(".bounty-award-container");1<g.length?(g=g.filter(":first").find(".bounty-award"),c=parseInt(g.text(),10),d=parseInt(d.text(),10),g.text("+"+(c+d)),f.remove()):(d.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),
f.not(d).remove())}else StackExchange.helpers.showErrorMessage(d.parent(),g.Message),f.removeClass("disabled")},i=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){var d=$(this),g=StackExchange.vote.getPostId(d);if(j?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):1)$(".bounty-vote").addClass("disabled"),StackExchange.vote.submit(d,
g,StackExchange.vote.voteTypeIds.bountyClose,f)})},d=function(d,f){f=$(f||$(".bounty-link"));f=f.off("click",g);if(d)f.on("click",g);return f},g=function(){var f=d(!1,this);f.addSpinnerAfter({padding:"0 3px"});var g=$(f).closest(".question").find("div.vote input").val();$.ajax({type:"GET",url:"/posts/bounty/"+g,dataType:"html",success:function(d){var c=$(d);c.appendTo(f.parent());c.find(".popup-close").click(function(){c.fadeOutAndRemove()});c.center().fadeIn("fast")},error:function(){f.parent().showErrorMessage("Unable to load popup - please try again")},
complete:function(){StackExchange.helpers.removeSpinner();d(!0,f)}})};return{init:function(f){j=!!f.hasOpenBounty;f.canOpenBounty&&d(!0);f.hasOpenBounty&&i()}}}();